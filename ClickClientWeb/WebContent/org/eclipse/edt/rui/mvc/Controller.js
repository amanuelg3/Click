define(["org/eclipse/edt/rui/mvc/InternalValidators","org/eclipse/edt/rui/mvc/InternalDateFormatter","org/eclipse/edt/rui/mvc/InternalTimeFormatter","eglx/ui/rui/eze$$Widget","eglx/ui/rui/eze$$Event","org/eclipse/edt/rui/mvc/InternalNumericFormatter","org/eclipse/edt/rui/mvc/InternalCharFormatter","org/eclipse/edt/rui/mvc/InternalFormatters","org/eclipse/edt/rui/mvc/MVCLib","eglx/javascript/eze$$Job","org/eclipse/edt/rui/mvc/InternalTimestampFormatter"],function(){egl.defineClass("org.eclipse.edt.rui.mvc","Controller",{"eze$$fileName":"org/eclipse/edt/rui/mvc/Controller.egl","eze$$runtimePropertiesFile":"org.eclipse.edt.rui.mvc.Controller","constructor":function(){new egl.org.eclipse.edt.rui.mvc.InternalCharFormatter();new egl.org.eclipse.edt.rui.mvc.InternalDateFormatter();new egl.org.eclipse.edt.rui.mvc.InternalFormatters();new egl.org.eclipse.edt.rui.mvc.InternalNumericFormatter();new egl.org.eclipse.edt.rui.mvc.InternalTimeFormatter();new egl.org.eclipse.edt.rui.mvc.InternalTimestampFormatter();new egl.org.eclipse.edt.rui.mvc.InternalValidators();new egl.org.eclipse.edt.rui.mvc.InternalValidators();new egl.org.eclipse.edt.rui.mvc.InternalDateFormatter();new egl.org.eclipse.edt.rui.mvc.InternalTimeFormatter();new egl.org.eclipse.edt.rui.mvc.InternalNumericFormatter();new egl.org.eclipse.edt.rui.mvc.InternalCharFormatter();new egl.org.eclipse.edt.rui.mvc.InternalFormatters();new egl.org.eclipse.edt.rui.mvc.MVCLib();new egl.org.eclipse.edt.rui.mvc.InternalTimestampFormatter();},"eze$$setEmpty":function(){new egl.org.eclipse.edt.rui.mvc.InternalCharFormatter();new egl.org.eclipse.edt.rui.mvc.InternalDateFormatter();new egl.org.eclipse.edt.rui.mvc.InternalFormatters();new egl.org.eclipse.edt.rui.mvc.InternalNumericFormatter();new egl.org.eclipse.edt.rui.mvc.InternalTimeFormatter();new egl.org.eclipse.edt.rui.mvc.InternalTimestampFormatter();new egl.org.eclipse.edt.rui.mvc.InternalValidators();new egl.org.eclipse.edt.rui.mvc.InternalValidators();new egl.org.eclipse.edt.rui.mvc.InternalDateFormatter();new egl.org.eclipse.edt.rui.mvc.InternalTimeFormatter();new egl.org.eclipse.edt.rui.mvc.InternalNumericFormatter();new egl.org.eclipse.edt.rui.mvc.InternalCharFormatter();new egl.org.eclipse.edt.rui.mvc.InternalFormatters();new egl.org.eclipse.edt.rui.mvc.MVCLib();new egl.org.eclipse.edt.rui.mvc.InternalTimestampFormatter();this.model=null;this.view=new egl.eglx.ui.rui.Widget();this.formatters=[];this.unformatters=[];this.validators=[];this.internalFormatters=[];this.internalUnformatters=[];this.internalValidators=[];this.commitHelper=null;this.retrieveModelHelper=null;this.publishHelper=null;this.retrieveViewHelper=null;this.publishMessageHelper=null;this.retrieveValidStateHelper=null;this.showErrorState=null;this.validStateSetter=null;this.errorMessage=null;this.initialClass="";this.isStateInitialized=false;this.publishJob=new egl.eglx.javascript.Job();},"eze$$setInitial":function(){this.eze$$setEmpty();this.formatters=[];this.unformatters=[];this.validators=[];this.internalFormatters=[];this.internalUnformatters=[];this.internalValidators=[];this.errorMessage=null;this.initialClass="";this.isStateInitialized=false;this.publishJob.setRunFunction(new egl.egl.jsrt.Delegate(this,egl.org.eclipse.edt.rui.mvc.Controller.prototype.publish));},"eze$$clone":function(){var _1=this;var _2=new egl.org.eclipse.edt.rui.mvc.Controller();_2.model=_1.model===null?null:_1.model;_2.view=_1.view===null?null:_1.view;_2.formatters=_1.formatters===null?null:_1.formatters;_2.unformatters=_1.unformatters===null?null:_1.unformatters;_2.validators=_1.validators===null?null:_1.validators;_2.internalFormatters=_1.internalFormatters===null?null:_1.internalFormatters;_2.internalUnformatters=_1.internalUnformatters===null?null:_1.internalUnformatters;_2.internalValidators=_1.internalValidators===null?null:_1.internalValidators;_2.commitHelper=_1.commitHelper===null?null:_1.commitHelper;_2.retrieveModelHelper=_1.retrieveModelHelper===null?null:_1.retrieveModelHelper;_2.publishHelper=_1.publishHelper===null?null:_1.publishHelper;_2.retrieveViewHelper=_1.retrieveViewHelper===null?null:_1.retrieveViewHelper;_2.publishMessageHelper=_1.publishMessageHelper===null?null:_1.publishMessageHelper;_2.retrieveValidStateHelper=_1.retrieveValidStateHelper===null?null:_1.retrieveValidStateHelper;_2.showErrorState=_1.showErrorState===null?null:_1.showErrorState;_2.validStateSetter=_1.validStateSetter===null?null:_1.validStateSetter;_2.errorMessage=_1.errorMessage===null?null:_1.errorMessage;_2.initialClass=_1.initialClass===null?null:_1.initialClass;_2.isStateInitialized=_1.isStateInitialized;_2.publishJob=_1.publishJob===null?null:_1.publishJob;return _2;},"eze$$getAnnotations":function(){if(this.annotations===undefined){this.annotations={};this.annotations["XMLRootElement"]=new egl.eglx.xml.binding.annotation.XMLRootElement("Controller",null,false);}return this.annotations;},"eze$$getFieldInfos":function(){if(this.fieldInfos===undefined){var _3;this.fieldInfos=new Array();_3={};_3["XMLStyle"]=new egl.eglx.xml.binding.annotation.XMLElement("model",null,false,false);_3["JsonName"]=new egl.eglx.json.JsonName("model");this.fieldInfos[0]=new egl.eglx.services.FieldInfo(getModel,setModel,"Aeglx/lang/eany;",egl.eglx.lang.EAny,_3);_3={};_3["XMLStyle"]=new egl.eglx.xml.binding.annotation.XMLElement("formatters",null,false,false);_3["JsonName"]=new egl.eglx.json.JsonName("formatters");this.fieldInfos[2]=new egl.eglx.services.FieldInfo("formatters","formatters","[org.eclipse.edt.rui.mvc.MVCFormatterFunction",egl.eglx.lang.AnyDelegate,_3);_3={};_3["XMLStyle"]=new egl.eglx.xml.binding.annotation.XMLElement("unformatters",null,false,false);_3["JsonName"]=new egl.eglx.json.JsonName("unformatters");this.fieldInfos[3]=new egl.eglx.services.FieldInfo("unformatters","unformatters","[org.eclipse.edt.rui.mvc.MVCFormatterFunction",egl.eglx.lang.AnyDelegate,_3);_3={};_3["XMLStyle"]=new egl.eglx.xml.binding.annotation.XMLElement("validators",null,false,false);_3["JsonName"]=new egl.eglx.json.JsonName("validators");this.fieldInfos[4]=new egl.eglx.services.FieldInfo("validators","validators","[org.eclipse.edt.rui.mvc.MVCValidatorFunction",egl.eglx.lang.AnyDelegate,_3);}return this.fieldInfos;},"setModel":function(_4){this.model=_4;this.publishJob.schedule();},"setView":function(_5){this.view=_5;egl.checkNull(_5).getOnFocusGained().appendElement(new egl.egl.jsrt.Delegate(this,egl.org.eclipse.edt.rui.mvc.Controller.prototype.focusGained));egl.checkNull(_5).getOnFocusLost().appendElement(new egl.egl.jsrt.Delegate(this,egl.org.eclipse.edt.rui.mvc.Controller.prototype.focusLost));this.publishJob.schedule();},"commit":function(){try{egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(this);var s;s=this.unformat(this.getRetrieveViewHelper()());egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(this);this.getCommitHelper()(s);egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(null);}catch(eze$Temp1){if(!(eze$Temp1 instanceof egl.eglx.lang.AnyException)){eze$Temp1=egl.makeExceptionFromCaughtObject(eze$Temp1);}var e=eze$Temp1;egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(null);this.errorMessage=egl.checkNull(e).message;}},"publish":function(){try{egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(this);var s;s=this.format(this.getRetrieveModelHelper()());egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(this);this.getPublishHelper()(s);egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(null);}catch(eze$Temp2){if(!(eze$Temp2 instanceof egl.eglx.lang.AnyException)){eze$Temp2=egl.makeExceptionFromCaughtObject(eze$Temp2);}var _6=eze$Temp2;egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(null);throw _6;}},"isValid":function(){var _7;_7=this.validate();this.notifyStateChange(_7);return _7;},"validate":function(){this.isStateInitialized=true;try{egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(this);if((egl.eglx.lang.EAny.notEquals(egl.checkNull(this).getRetrieveValidStateHelper(),null))){this.errorMessage=egl.checkNull(this).getRetrieveValidStateHelper()();if(!((((egl.eglx.lang.EAny.equals(this.errorMessage,null))||(egl.eglx.lang.EString.equals(this.errorMessage,"")))))){return false;}}var s;s=this.unformat(this.getRetrieveViewHelper()());egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(this);if((egl.eglx.lang.EAny.notEquals(this.errorMessage,null))){return false;}var n=0;for(n=1;((n<=this.internalValidators.getSize()));n=((n+1))){this.errorMessage=egl.checkNull(this.internalValidators)[this.internalValidators.checkIndex(egl.eglx.lang.EInt32.ezeCast({eze$$value:n,eze$$signature:"I;"},false)-1)](s);if(!((((egl.eglx.lang.EAny.equals(this.errorMessage,null))||(egl.eglx.lang.EString.equals(this.errorMessage,"")))))){return false;}}var n=0;for(n=1;((n<=this.validators.getSize()));n=((n+1))){this.errorMessage=egl.checkNull(this.validators)[this.validators.checkIndex(egl.eglx.lang.EInt32.ezeCast({eze$$value:n,eze$$signature:"I;"},false)-1)](s);if(!((((egl.eglx.lang.EAny.equals(this.errorMessage,null))||(egl.eglx.lang.EString.equals(this.errorMessage,"")))))){return false;}}egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(null);return true;}catch(eze$Temp10){if(!(eze$Temp10 instanceof egl.eglx.lang.AnyException)){eze$Temp10=egl.makeExceptionFromCaughtObject(eze$Temp10);}var _8=eze$Temp10;egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(null);throw _8;}},"format":function(s){try{egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(this);var n=0;for(n=this.internalFormatters.getSize();((n>=1));n=((n-1))){s=egl.checkNull(this.internalFormatters)[this.internalFormatters.checkIndex(egl.eglx.lang.EInt32.ezeCast({eze$$value:n,eze$$signature:"I;"},false)-1)](s);}var n=0;for(n=this.formatters.getSize();((n>=1));n=((n-1))){s=egl.checkNull(this.formatters)[this.formatters.checkIndex(egl.eglx.lang.EInt32.ezeCast({eze$$value:n,eze$$signature:"I;"},false)-1)](s);}egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(null);}catch(eze$Temp13){if(!(eze$Temp13 instanceof egl.eglx.lang.AnyException)){eze$Temp13=egl.makeExceptionFromCaughtObject(eze$Temp13);}var e=eze$Temp13;egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(null);this.errorMessage=egl.checkNull(e).message;}return s;},"unformat":function(s){this.errorMessage=null;try{egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(this);var n=0;for(n=this.unformatters.getSize();((n>=1));n=((n-1))){s=egl.checkNull(this.unformatters)[this.unformatters.checkIndex(egl.eglx.lang.EInt32.ezeCast({eze$$value:n,eze$$signature:"I;"},false)-1)](s);}var n=0;for(n=this.internalUnformatters.getSize();((n>=1));n=((n-1))){s=egl.checkNull(this.internalUnformatters)[this.internalUnformatters.checkIndex(egl.eglx.lang.EInt32.ezeCast({eze$$value:n,eze$$signature:"I;"},false)-1)](s);}egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(null);}catch(eze$Temp16){if(!(eze$Temp16 instanceof egl.eglx.lang.AnyException)){eze$Temp16=egl.makeExceptionFromCaughtObject(eze$Temp16);}var e=eze$Temp16;egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(null);this.errorMessage=egl.checkNull(e).message;}return s;},"getValidators":function(){return this.validators;},"getErrorMessage":function(){return this.errorMessage;},"setErrorMessage":function(_9){this.errorMessage=_9;},"getView":function(){return this.view;},"getModel":function(){return this.model;},"focusLost":function(e){this.isValid();},"focusGained":function(e){try{egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(this);if(((!((((egl.eglx.lang.EAny.equals(null,this.errorMessage))||(egl.eglx.lang.EString.equals("",this.errorMessage)))))&&(egl.eglx.lang.EAny.notEquals(null,egl.checkNull(this).getPublishMessageHelper()))))){if((egl.eglx.lang.EAny.notEquals(null,this.getShowErrorState()))){egl.checkNull(this).getShowErrorState()(true);}egl.checkNull(this).getPublishMessageHelper()(this.errorMessage);}egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(null);}catch(eze$Temp19){if(!(eze$Temp19 instanceof egl.eglx.lang.AnyException)){eze$Temp19=egl.makeExceptionFromCaughtObject(eze$Temp19);}var _a=eze$Temp19;egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(null);throw _a;}},"notifyStateChange":function(_b){try{egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(this);this.initialClass=egl.checkNull(this.getView()).getClass();if(_b){this.getView().setClass(this.initialClass);}else{this.getView().setClass(((this.initialClass)+" FormErrorEditor"));}if(((!(_b)&&(egl.eglx.lang.EAny.notEquals(null,this.getShowErrorState()))))){egl.checkNull(this).getShowErrorState()(true);}if((egl.eglx.lang.EAny.notEquals(this.validStateSetter,null))){this.validStateSetter(this.getView(),_b);}egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(null);}catch(eze$Temp23){if(!(eze$Temp23 instanceof egl.eglx.lang.AnyException)){eze$Temp23=egl.makeExceptionFromCaughtObject(eze$Temp23);}var _c=eze$Temp23;egl.org.eclipse.edt.rui.mvc.MVCLib["$inst"].setCurrentContext(null);}},"getCommitHelper":function(){return this.commitHelper;},"getPublishHelper":function(){return this.publishHelper;},"getRetrieveViewHelper":function(){return this.retrieveViewHelper;},"getRetrieveModelHelper":function(){return this.retrieveModelHelper;},"getPublishMessageHelper":function(){return this.publishMessageHelper;},"getRetrieveValidStateHelper":function(){return this.retrieveValidStateHelper;},"getShowErrorState":function(){return this.showErrorState;},"setCommitHelper":function(_d){this.commitHelper=_d;},"setPublishHelper":function(_e){this.publishHelper=_e;var _f=null;var _10;_10=new egl.eglx.javascript.Job();_10.setRunFunction(new egl.egl.jsrt.Delegate(this,egl.org.eclipse.edt.rui.mvc.Controller.prototype.publish));_f=_10;egl.checkNull(_f).schedule();},"setRetrieveViewHelper":function(_11){this.retrieveViewHelper=_11;},"setRetrieveModelHelper":function(_12){this.retrieveModelHelper=_12;var _13=null;var _14;_14=new egl.eglx.javascript.Job();_14.setRunFunction(new egl.egl.jsrt.Delegate(this,egl.org.eclipse.edt.rui.mvc.Controller.prototype.publish));_13=_14;egl.checkNull(_13).schedule();},"setPublishMessageHelper":function(_15){this.publishMessageHelper=_15;},"setRetrieveValidStateHelper":function(_16){this.retrieveValidStateHelper=_16;},"setShowErrorState":function(_17){this.showErrorState=_17;},"isValidStateInitialized":function(){return this.isStateInitialized;},"toString":function(){return "[Controller]";}});});