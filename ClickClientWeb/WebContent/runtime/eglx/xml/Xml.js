egl.xmllib_xsi_url="http://www.w3.org/2001/XMLSchema-instance";egl.defineClass("eglx.xml","XmlLib",{"constructor":function(){}});egl.eglx.xml.XmlLib["convertToXML"]=function(_1,_2){_1=egl.unboxAny(_1);this.validateXMLObject(_1);var _3={};_3.xmlns_map={};_3.count=0;var _4=this.toXML(_1,_3,null);_4=this.addNamespacesToXML(_3,_4);return typeof _2=="boolean"&&_2?"<?xml version=\"1.0\" encoding=\"UTF-8\"?>"+_4:_4;};egl.eglx.xml.XmlLib["toXML"]=function(_5,_6,_7){var s=[];if(_5!==null&&typeof _5==="object"&&"eze$$value" in _5&&"eze$$signature" in _5){s.push(this.toXML(egl.unboxAny(_5),_6,_7));}else{if(_5!==null&&typeof _5==="object"&&"eze$$getFieldInfos" in _5){s.push(this.eglClassToXML(_5,_6,_7));}else{if(_5!==null&&typeof _5==="object"&&_5 instanceof egl.eglx.lang.EDictionary){s.push(this.dictionaryToXML(_5,_6,_7));}else{if(_5!==null&&typeof _5==="object"&&_5 instanceof Array){s.push(this.arrayToXML(_5,_6,_7));}else{if(_5===null){s.push(this.nullToXML(_5,_6,_7));}else{if(_5!==null&&typeof _5==="object"&&_5 instanceof egl.eglx.lang.Enumeration){s.push(this.primitiveToXML(_5.value,_6,_7));}else{s.push(this.primitiveToXML(_5,_6,_7));}}}}}}return s.join("");};egl.eglx.xml.XmlLib["nullToXML"]=function(_8,_9,_a){var _b=_a.annotations["XMLStyle"];var s=[];if(_b.nillable){var _c=_b.name;var _d=_b.namespace;var _e="";if(_d!=null){_e=this.addNamespace(_9,_d);}if(_c==null){_c=_8;}_c=_e+_c;s.push("<"+_c+" xsi:nil=\"true\"/>");egl.eglx.xml.XmlLib.addXSINamespace(_9);}return s.join("");};egl.eglx.xml.XmlLib["primitiveToXML"]=function(_f,_10,_11){var _12=_11.annotations["XMLStyle"];var _13=_12.name;var _14=_12.namespace;var _15="";if(_14!=null){_15=this.addNamespace(_10,_14);}if(_13==null){_13=_f;}_13=_15+_13;var _16=_f;var _17=_11.eglSignature.charAt(0)!=="?"?_11.eglSignature.charAt(0):_11.eglSignature.charAt(1);switch(_17){case "K":_16=egl.eglx.lang.StringLib.format(_16,"yyyy-MM-dd");break;case "L":_16=egl.eglx.lang.StringLib.format(_16,"HH:mm:ss");break;case "J":_16=egl.eglx.lang.StringLib.format(_16,"yyyy-MM-dd HH:mm:ss");break;}if(_f instanceof egl.javascript.BigDecimal){_16=_f.toString();}_16=(typeof (_16)!="string")?_16:_16.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");if(_12 instanceof egl.eglx.xml.binding.annotation.XMLAttribute){return " "+_13+"=\""+_16+"\"";}else{if(_11.annotations["XMLValue"]===undefined){return "<"+_13+">"+_16+"</"+_13+">";}else{return _16;}}};egl.eglx.xml.XmlLib["dictionaryToXML"]=function(_18,_19,_1a){var _1b=_1a.annotations["XMLStyle"];var _1c=_1b.name;var s=["<"+_1c+">"];for(var f in _18){var xx4=f;if(!f.match(/^eze\$\$/)&&(typeof _18[f]!="function")){var _1d={};_1d["XMLStyle"]=new egl.eglx.xml.binding.annotation.XMLElement(f,null,true,true);var _1e="";if(_18[f]!==null&&typeof _18[f]==="object"&&"eze$$signature" in _18[f]){_1e=_18[f]["eze$$signature"];}var _1a=new egl.eglx.xml.binding.annotation.FieldInfo(null,null,_1e,_1a.eglType,_1d);s.push(this.toXML(_18[f],_19,_1a));}}s.push("</"+_1c+">");return s.join("");};egl.eglx.xml.XmlLib["arrayToXML"]=function(_1f,_20,_21){var _22=_21!=undefined&&_21!=null?_21.annotations["XMLStyle"]:null;var _23=_21.annotations["XMLArray"];var _24;var _25=false;var _26=null;if(_23!=undefined&&_23!=null){if(_23.names!=undefined&&_23.names!=null&&_23.names.length>0){_26=_23.names.slice(0);_24=_23.names[0];}if(_23.wrapped!=undefined&&_23.wrapped!=null){_25=_23.wrapped;}}if(_24==null){_24=_1f;}if(_26==null){_26=new Array();_26[0]="item";}var s=[];_21=egl.clone(_21);_21.eglSignature=_21.eglSignature.slice(1);if(_25){s=["<"+_22.name+">"];_21.annotations["XMLStyle"].name=_26[0];}else{_24=_22.name;_21.annotations["XMLStyle"].name=_22.name;}for(var idx=0;idx<_1f.length;idx++){if(_1f[0] instanceof Array){_21.annotations["XMLArray"]=new egl.eglx.xmlXMLArray(true,_26.slice(1));}s.push(this.toXML(_1f[idx],_20,_21));}if(_25){s.push("</"+_22.name+">");}return s.join("");};egl.eglx.xml.XmlLib["eglClassToXML"]=function(_27,_28,_29){var _2a=_29!=undefined&&_29!=null?_29.annotations["XMLStyle"]:null;var _2b=_27.eze$$getAnnotations();var _2c=_2a!=null?_2a.name:null;var _2d=_2a!=null&&_2a.namespace!=null?this.addNamespace(_28,_2a.namespace):"";if(_2a===null&&_2b!=undefined&&_2b["XMLRootElement"]!=undefined&&_2b["XMLRootElement"]!=null){if(_2b["XMLRootElement"].namespace!=undefined&&_2b["XMLRootElement"].namespace!=null){_2d=this.addNamespace(_28,_2b["XMLRootElement"].namespace);}if(_2c==null&&_2b["XMLRootElement"].name!=undefined&&_2b["XMLRootElement"].name!=null){_2c=_2b["XMLRootElement"].name;}}var _2e=_2b["XMLValue"]!==undefined&&_2b["XMLValue"]!==null&&_2b["XMLValue"].kind==egl.eglx.xml.binding.annotation.XMLStructureKind.simpleContent;_2c=_2d+_2c;var _2f=_27.eze$$getFieldInfos();var s=["<"+_2c];if(_2f){for(var idx=0;idx<_2f.length;idx++){if(_2f[idx].annotations["XMLStyle"] instanceof egl.eglx.xml.binding.annotation.XMLAttribute){var _30;if(_2f[idx].getterFunction instanceof Function){_30=_27[_2f[idx].getterFunction].apply();}else{_30=_27[_2f[idx].getterFunction];}s.push(this.toXML(_30,_28,_2f[idx]));}}s.push(">");for(var idx=0;idx<_2f.length;idx++){if(!(_2f[idx].annotations["XMLStyle"] instanceof egl.eglx.xml.binding.annotation.XMLAttribute)){if(_2f[idx].getterFunction instanceof Function){_30=_27[_2f[idx].getterFunction].apply();}else{_30=_27[_2f[idx].getterFunction];}if(_2e){var _31=new Array();_31["XMLStyle"]=_2f[idx].annotations["XMLStyle"];_31["XMLValue"]=_2b["XMLValue"];var _32=new egl.eglx.services.FieldInfo(_2f[idx].getterFunction,_2f[idx].setterFunction,_2f[idx].eglSignature,_2f[idx].eglType,_31);s.push(this.toXML(_30,_28,_32));}else{s.push(this.toXML(_30,_28,_2f[idx]));}}}}else{s.push(">");}s.push("</"+_2c+">");return s.join("");};egl.eglx.xml.XmlLib["validateXMLObject"]=function(_33){_33=egl.unboxAny(_33);if(_33===null||typeof _33!=="object"||!("eze$$getFieldInfos" in _33)){var _34=_33;if(_33==undefined||_33==null){_34="undefined";}if(typeof _33==="object"&&"eze$$signature" in _33){_34=egl.typeName(_33.eze$$signature);}else{_34=typeof _33;}throw egl.createRuntimeException("CRRUI2108E",[_34]);}};egl.eglx.xml.XmlLib["addNamespace"]=function(_35,_36){if(_35.xmlns_map[_36]){return _35.xmlns_map[_36]+":";}_35.count++;var _37="ns"+_35.count;_35.xmlns_map[_36]=_37;return _37+":";};egl.eglx.xml.XmlLib["elementIsNil"]=function(_38){var _39=this.getAttributeNS(_38,"nil",egl.xmllib_xsi_url);var s=new String();return _39!=null&&"true"===_39.toLowerCase();};egl.eglx.xml.XmlLib["addXSINamespace"]=function(_3a){_3a.xmlns_map[egl.xmllib_xsi_url]="xsi";};egl.eglx.xml.XmlLib["addNamespacesToXML"]=function(_3b,xml){var s=[];for(var f in _3b.xmlns_map){s.push(" xmlns:"+_3b.xmlns_map[f]+"=\""+f+"\"");}var ndx=xml.indexOf(">");return xml.substring(0,ndx)+s.join("")+xml.substring(ndx);};egl.eglx.xml.XmlLib["convertFromXML"]=function(xml,_3c){if(typeof (xml)!="string"){throw egl.createRuntimeException("CRRUI2030E",typeof (xml));}_3c=egl.unboxAny(_3c);this.validateXMLObject(_3c);xml=egl.trim(xml);var dom=null;try{if(!egl.IE||egl.IEVersion>=9){dom=(new DOMParser()).parseFromString(xml,"application/xml");}else{if(egl.IE){dom=new ActiveXObject("MSXML2.DOMDocument");dom.loadXML(xml);}}if("parseError" in dom&&"errorCode" in dom.parseError&&dom.parseError.errorCode!=0){var _3d="";if("line" in dom.parseError){_3d=", Line/position:"+dom.parseError.line;}if("linepos" in dom.parseError){_3d+="/"+dom.parseError.linepos;}if("srcText" in dom.parseError){_3d+=", SOURCE:"+dom.parseError.srcText;}if("reason" in dom.parseError){throw new Error("parseError:"+dom.parseError.errorCode+", "+dom.parseError.reason+_3d);}}else{if("getElementsByTagName" in dom){var _3e=dom.getElementsByTagName("parsererror");if(_3e!==undefined&&_3e!==null&&_3e.length>0){throw new Error(new XMLSerializer().serializeToString(dom));}}}}catch(e){throw egl.createRuntimeException("CRRUI2031E",["message" in e?e.message:e.toString()]);}_3c=this.eglFromXML(dom.documentElement,_3c);return _3c;};egl.eglx.xml.XmlLib["eglFromXML"]=function(_3f,_40){if(_40!==null&&typeof _40==="object"&&"eze$$value" in _40&&"eze$$signature" in _40){return egl.boxAny(this.eglFromXML(_3f,egl.unboxAny(_40)));}else{if(_40!==null&&typeof _40==="object"&&"eze$$getFieldInfos" in _40){return this.eglClassFromXML(_3f,_40,null);}}};egl.eglx.xml.XmlLib["fromXML"]=function(_41,_42){var _43;var _44=null;if(_41!=undefined&&_41!=null){_44=this.getAttributeNS(_41,"type",null);if(_44!=null){}}else{return null;}if((_43==undefined||_43==null)&&_42!=null){_43=new _42.eglType();}if(_41===undefined||_41===null||(_41 instanceof Array&&_41.length===0)){return null;}if(_42!=null&&(_43==undefined||_43==null)&&(_41[0].children==null||_41[0].children.length==0)){_43=this.primitiveFromXML(_41[0],_42);}if(_43!==null&&typeof _43==="object"&&this.isEglArray(_42)){if(egl.eglx.xml.XmlLib.elementIsNil(_41)){return null;}return this.arrayFromXML(_41,_43,_42);}else{if(_42===null&&this.isElementArray(_41)!==null){if(egl.eglx.xml.XmlLib.elementIsNil(_41)){return null;}return this.arrayFromXML(_41,_43,_42);}else{if(egl.eglx.xml.XmlLib.elementIsNil(_41[0])){return null;}else{if(_43!==null&&typeof _43==="object"&&"eze$$getFieldInfos" in _43){return this.eglClassFromXML(_41[0],_43,_42);}else{if(_43!==null&&typeof _43==="object"&&_43 instanceof egl.eglx.lang.EDictionary){return this.dictionaryFromXML(_41[0],_43,_42);}else{if(_43!==null&&typeof _43==="object"&&_43 instanceof egl.eglx.lang.Enumeration){return this.enumerationFromXML(_41[0],_43,_42);}else{if((_43==undefined||_43==null)&&(_41[0].children!=null&&_41[0].children.length>1)){return this.dictionaryFromXML(_41[0],new egl.eglx.lang.EDictionary(),_42);}else{return this.primitiveFromXML(_41[0],_42);}}}}}}}};egl.eglx.xml.XmlLib["isElementArray"]=function(_45){var _46=null;var _47=null;if(_45 instanceof Array){_47=_45;}else{if(_45 instanceof Element){_47=this.getChildElements(_45);}}if(_47!=null&&_47.length>1){for(var idx=0;idx<_47.length;idx++){var _48=_47[idx].tagName.split(":");var _49=_48[_48.length-1];if(_46===null){_46=_49;}else{if(_46!=_49){return null;}}}return _46;}return null;};egl.eglx.xml.XmlLib["isEglArray"]=function(_4a){return _4a!==null&&typeof _4a==="object"&&_4a.eglSignature.charAt(0)==="[";};egl.eglx.xml.XmlLib["primitiveFromXML"]=function(_4b,_4c){if(_4b===undefined||_4b===null){return null;}else{return this.newPrimitiveFromXml(this.getElementText(_4b),_4c);}};egl.eglx.xml.XmlLib["newPrimitiveFromXml"]=function(_4d,_4e){if(_4d==null){return null;}else{var _4f;var _50=0;var _51=_4e==null?"S":_4e.eglSignature.charAt(0);if(_51!=="?"){_4f=_51;}else{_4f=_4e==null?"S":_4e.eglSignature.charAt(1);_50=1;}switch(_4f){case "S":case "s":var _52=_4e==null?-1:_4e.eglSignature.indexOf(";");if(_52>(++_50)){var len=egl.convertStringToSmallint(_4e.eglSignature.substring(_50,_52));_4d=_4d.substring(0,len);}break;case "K":_4d=egl.stringToDate(_4d,"yyyy-MM-dd");break;case "L":_4d=egl.stringToTime(_4d,"HH:mm:ss");break;case "J":_4d=egl.stringToTimeStamp(_4d,"yyyy-MM-dd HH:mm:ss");break;case "I":_4d=egl.eglx.lang.EInt32.fromEString(_4d);break;case "i":_4d=egl.eglx.lang.EInt16.fromEString(_4d);break;case "0":_4d=egl.eglx.xml.XmlLib.toBoolean(_4d);break;case "F":_4d=egl.eglx.lang.EFloat64.fromEString(_4d);break;case "f":_4d=egl.eglx.lang.EFloat32.fromEString(_4d);break;case "B":_4d=egl.eglx.lang.EInt64.fromEString(_4d);break;case "N":var _53=_4e.eglSignature.indexOf(":");_4d=egl.eglx.lang.EDecimal.fromEString(_4d.toString(),egl.convertStringToSmallint(_4e.eglSignature.substring(_53+1,_4e.eglSignature.indexOf(";"))),egl.javascript.BigDecimal.prototype.NINES[egl.convertStringToSmallint(_4e.eglSignature.substring(_50+1,_53))-1]);break;case "d":var _53=_4e.eglSignature.indexOf(":");_4d=egl.eglx.lang.EDecimal.fromEString(_4d.toString(),egl.convertStringToSmallint(_4e.eglSignature.substring(_53+1,_4e.eglSignature.indexOf(";"))),egl.javascript.BigDecimal.prototype.NINES[egl.convertStringToSmallint(_4e.eglSignature.substring(_50+1,_53))-1]);break;case "9":var _53=_4e.eglSignature.indexOf(":");_4d=egl.eglx.lang.EDecimal.fromEString(_4d.toString(),egl.convertStringToSmallint(_4e.eglSignature.substring(_53+1,_4e.eglSignature.indexOf(";"))),egl.javascript.BigDecimal.prototype.NINES[egl.convertStringToSmallint(_4e.eglSignature.substring(_50+1,_53))-1]);break;}}return _4d;};egl.eglx.xml.XmlLib["enumerationFromXML"]=function(_54,_55,_56){return egl.eglx.services.$ServiceRT.convertToEnum(this.getElementText(_54),_56.eglType);};egl.eglx.xml.XmlLib["dictionaryFromXML"]=function(_57,_58,_59){if(_58==null){_58=egl.createDictionary(true,true);}var _5a=this.getNamedChildElements(_57);for(var _5b in _5a){var val=this.fromXML(_5a[_5b],null);egl.eglx.lang.EDictionary.set(_58,_5b,egl.boxAny(val,egl.inferSignature(val)));}return _58;};egl.eglx.xml.XmlLib["arrayFromXML"]=function(_5c,_5d,_5e){var _5f=_5e!=undefined&&_5e!=null?_5e.annotations["XMLStyle"]:null;if(_5d==null&&_5e!=null){}var _60=_5e!=undefined&&_5e!=null?_5e.annotations["XMLArray"]:null;var _61;var _62=false;var _63=null;if(_60!=undefined&&_60!=null){if(_60.names!=undefined&&_60.names!=null&&_60.names.length>0){_63=_60.names.slice(0);_61=_60.names[0];}if(_60.wrapped!=undefined&&_60.wrapped!=null){_62=_60.wrapped;}}if(_63==null){_63=new Array();_63[0]="item";}var _64=_5c;if(_62){_64=this.getChildElementNS(_5c[0],_63[0],_5f.namespace);}if(_5e!=null){_5e=egl.clone(_5e);_5e.eglSignature=_5e.eglSignature.slice(1);_5e.annotations["XMLStyle"].name=_62?_63[0]:_5f.name;}var _65=new Array();for(var idx=0;idx<_64.length;idx++){if(this.isEglArray(_5e)){_5e.annotations["XMLArray"]=new egl.eglx.xmlXMLArray(true,_63.slice(1));}_65[idx]=this.fromXML([_64[idx]],_5e);}return _65;};egl.eglx.xml.XmlLib["eglClassFromXML"]=function(_66,_67,_68){var _69=_68!=undefined&&_68!=null?_68.annotations["XMLStyle"]:null;var _6a=_67.eze$$getAnnotations();var _6b=_69!=null?_69.name:null;var _6c=_69!=null?_69.namespace:null;var _6d="";if(_69===null&&_6a!=undefined&&_6a["XMLRootElement"]!=undefined&&_6a["XMLRootElement"]!=null){if(_6c==null&&_6a["XMLRootElement"].namespace!=undefined&&_6a["XMLRootElement"].namespace!=null){_6c=_6a["XMLRootElement"].namespace;}if(_6b==null&&_6a["XMLRootElement"].name!=undefined&&_6a["XMLRootElement"].name!=null){_6b=_6a["XMLRootElement"].name;}}var _6e=_6a["XMLValue"]!==undefined&&_6a["XMLValue"]!==null&&_6a["XMLValue"].kind==egl.eglx.xml.binding.annotation.XMLStructureKind.simpleContent;var _6f=_67.eze$$getFieldInfos();if(_6f){var _70;for(var idx=0;idx<_6f.length;idx++){_69=_6f[idx].annotations["XMLStyle"];var _71=true;if(_69 instanceof egl.eglx.xml.binding.annotation.XMLAttribute){_70=this.newPrimitiveFromXml(this.getAttributeNS(_66,_69.name,_69.namespace),_6f[idx]);}else{if(!_6e){_70=this.fromXML(this.getChildElementNS(_66,_69.name,_69.namespace),_6f[idx]);}else{_70=this.newPrimitiveFromXml(this.getElementText(_66),_6f[idx]);}}if(_71){if(_6f[idx].setterFunction instanceof Function){_6f[idx].setterFunction.apply(_70);}else{_67[_6f[idx].setterFunction]=_70;}}}}return _67;};egl.eglx.xml.XmlLib["toBoolean"]=function(_72){_72=_72===undefined||_72===null?null:_72.toLowerCase();if("true".eq(_72)||"1".eq(_72)){return new Boolean(true);}else{if("false".eq(_72)||"0".eq(_72)){return new Boolean(false);}}throw egl.createRuntimeException("CRRUI2710E",[_72]);};egl.eglx.xml.XmlLib["getNamedChildElements"]=function(_73){var _74=_73.childNodes;var _75={};for(var n=0;n<_74.length;n++){if(_74[n].nodeType==1){var _76=_74[n].tagName.split(":");var _77=_76[_76.length-1];if(!_75[_77]){_75[_77]=[];}_75[_77].push(_74[n]);}}return _75;};egl.eglx.xml.XmlLib["getChildElements"]=function(_78){var _79=this.getNamedChildElements(_78);var _7a=[];var i=0;for(var f in _79){_7a[i]=_79[f];i++;}return _7a;};egl.eglx.xml.XmlLib["getChildElementNS"]=function(_7b,_7c,_7d){_7d=(!_7d)?this.defaultNamespace():_7d;var _7e=_7b.childNodes;var _7f=[];var i=0;for(var n=0;n<_7e.length;n++){if(_7e[n].nodeType==1){var _80=_7e[n].tagName.split(":");var _81=_80[_80.length-1];if(_81==_7c&&_7e[n].namespaceURI==_7d){_7f[i]=_7e[n];i++;}}}return _7f;};egl.eglx.xml.XmlLib["getAttributeNS"]=function(_82,_83,_84){_84=(!_84)?this.defaultNamespace():_84;var _85=_82.attributes;if(_85!=null){for(var i=0;i<_85.length;i++){var _86=_85.item(i);var _87=_86.name.split(":");var _88=_87[_87.length-1];if(_88==_83&&_86.namespaceURI==_84){return _86.value;}}}return null;};egl.eglx.xml.XmlLib["getElementText"]=function(_89){var _8a=_89.childNodes;var _8b=[];var i=0;for(var n=0;n<_8a.length;n++){if(_8a[n].nodeType==3||_8a[n].nodeType==4){_8b[i]=_8a[n].nodeValue;i++;}}return _8b.join("");};egl.eglx.xml.XmlLib["defaultNamespace"]=function(){if(!egl.IE||egl.IEVersion>=9){return null;}else{return "";}};