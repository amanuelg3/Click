egl.defineWidget("dojo.mobile.widgets","DojoMobileTabContainer","dojo.mobile.widgets","DojoMobileContainer","div",{"constructor":function(){var _1=this;this.selection=1;this.started=false;this.segmentedControl=true;require(["dojox/mobile/TabBar"],function(){_1.renderWhenDojoIsDoneLoading();});},"getChildrenLength":function(){if(this.tabBarWidget){var _2=this.tabBarWidget.getChildren();return _2?_2.length:0;}return 0;},"setChildren":function(_3){var _4=this;this.children=_3;if(this.tabBarWidget&&this.children){var i=0,j=0,_5=true,_6=[],_7=[];var _8=this.tabBarWidget.getChildren();this.selection=this.getSelection();if(_8){for(i=0;i<_8.length;++i){_5=true;for(j=0;j<_3.length;++j){if(_8[i]==_3[j].tabBtnWidget){_5=false;break;}}if(_5){_6.push(i);}}var _9=this.selection-1;function _a(_b){preSel=_6[_b]-1;preIndex=_b-1;if(preIndex<0){return 0;}if(_6[preIndex]!=preSel){return preSel;}else{return _a(preIndex);}};if(_6.length>0){_6.sort();for(i=0;i<_6.length;++i){if(_6[i]==_9){newSel=_a(i);this.selection=++newSel;break;}}for(i=0;i<_6.length;++i){var _c=_8[_6[i]].get("moveTo");var _d=dijit.byId(_c);if(_d){_d.destroy(false);}this.tabBarWidget.removeChild(_6[i]);_8[_6[i]].destroy(false);if(this.selection>1&&_6[i]<=this.selection){--this.selection;}}}}for(i=0;i<this.children.length;++i){if(_3[i].tabBtnWidget&&_3[i].tabViewWidget){if(this.tabBarWidget.getIndexOfChild(_3[i].tabBtnWidget)==-1){this.tabBarWidget.addChild(_3[i].tabBtnWidget,i+1);this.tabContainerNode.appendChild(_3[i].tabViewWidget.domNode);_7.push(i);if(i<this.selection){++this.selection;}}}else{_3[i].parent=this;}}this.setSelection(this.selection);if(_7.length>0){for(i=0;i<_7.length;++i){_3[_7[i]].tabViewWidget.startup();}}if(this._layout=="Bottom"){this.fixBottom();}}},"addTab":function(_e,_f){if(_f<1||_f>this.children.length+1){egl.createRuntimeException(this.eze$$typename+".addTab : Invalid tab index "+tabIndex);}this.children.splice(_f,0,_e);this.setChildren(this.children);if(document.createEvent){event=document.createEvent("HTMLEvents");event.initEvent("resize",false,true);window.dispatchEvent(event);}else{window.fireEvent&&window.fireEvent("resize");}return;},"removeTab":function(_10){if(_10<1||_10>this.children.length){egl.createRuntimeException(this.eze$$typename+".addTab : Invalid tab index "+tabIndex);}this.children.splice(_10-1,1);this.setChildren(this.children);if(document.createEvent){event=document.createEvent("HTMLEvents");event.initEvent("resize",false,true);window.dispatchEvent(event);}else{window.fireEvent&&window.fireEvent("resize");}return;},"appendChild":function(_11){this.children=this.children||[];this.children.push(_11);this.setChildren(this.children);},"appendChildren":function(_12){this.children=this.children||[];for(var n=0;n<_12.length;n++){this.children.push(_12[n]);}this.setChildren(this.children);},"removeChild":function(_13){if(!this.children){return;}for(var n=0;n<this.children.length;n++){if(this.children[n]==_13){this.removeTab(n+1);return;}}throw this.eze$$typename+".removeChild: the child is not found.";},"removeChildren":function(){this.children=[];if(this.dojoWidget){while(this.dojoWidget.domNode.firstChild){this.dojoWidget.domNode.removeChild(this.dojoWidget.domNode.firstChild);}}},"createDojoWidget":function(_14){var _15=this;if(this._class){_14.className=_14.className+" "+this._class;}var _16=document.createElement("ul");if(!_16){egl.createRuntimeException("ERROR IN CREATING TABBAR");}_15.tabContainerNode=_14;_15.containerNode=_14;if(_15._layout=="Fixed Bottom"){_16.style.position="fixed";_16.style.left=0;_16.style.bottom=0;_16.style.right=0;_16.style.zIndex="10000";_15.tabContainerNode.appendChild(_16);}else{if(_15._layout=="Fixed Top"){_16.style.position="fixed";_16.style.left=0;_16.style.top=0;_16.style.right=0;_16.style.zIndex="10000";_15.tabContainerNode.appendChild(_16);}else{if(_15._layout!="Bottom"){_15.tabContainerNode.appendChild(_16);}}}_16.id=_15.id||"";var _17={};if(_15.segmentedControl){_17.barType="segmentedControl";}_15.tabBarWidget=new dojox.mobile.TabBar(_17,_16);_15.dojoWidget=_15.tabBarWidget;require(["dojo/mobile/utility/Synchronor"],function(_18){_18.trigger(_15,"SYN_READY");_18.wait(_15.children,"SYN_READY",function(){for(var i=0;i<_15.children.length;++i){if(_15.children[i].tabBtnWidget&&_15.children[i].tabViewWidget){_15.tabBarWidget.addChild(_15.children[i].tabBtnWidget);_15.tabContainerNode.appendChild(_15.children[i].tabViewWidget.domNode);}else{_15.children[i].parent=_15;}}if(_15._layout=="Bottom"){_15.tabContainerNode.appendChild(_16);}_15.setSelection(_15.selection);_15.tabBarWidget.startup();for(var i=0;i<_15.children.length;++i){if(_15.children[i].tabViewWidget){_15.children[i].tabViewWidget.startup();}}if(_15.segmentedControl==false){require(["dojo/_base/sniff"],function(has){setTimeout(function(){_15.tabBarWidget.domNode.style.height="auto";},has("ie")?100:0);});}_15.started=true;});});var _19=_15.copyAttribute;_15.copyAttribute=function(){_19.apply(_15,arguments);_15.eze$$DOMElement=_15.containerNode;};},"fixBottom":function(){var _1a=this;for(var i=0;i<_1a.tabContainerNode.childNodes.length;++i){if(_1a.tabContainerNode.childNodes[i]==_1a.tabBarWidget.domNode&&i!=(_1a.tabContainerNode.childNodes.length-1)){_1a.tabContainerNode.removeChild(_1a.tabBarWidget.domNode);_1a.tabContainerNode.appendChild(_1a.tabBarWidget.domNode);break;}}},"getSelection":function(){var _1b=this.tabBarWidget.getChildren();for(var i=0;i<_1b.length;++i){if(dojo.hasClass(_1b[i].domNode,"mblTabButtonSelected")){return i+1;}}return 0;},"setSelection":function(_1c){if(_1c<0){_1c=1;}if(this.tabBarWidget&&this.children&&_1c>this.children.length){_1c=this.children.length;}this.selection=_1c;_1c=_1c-1;if(this.tabBarWidget&&this.children&&this.children.length>0){if(this.started==false){for(var i=0;i<this.children.length;i++){this.children[i].tabViewWidget.domNode.style.visibility="visible";if(i==_1c){this.children[i].tabBtnWidget.select();this.children[i].tabViewWidget._visible=true;this.children[i].tabViewWidget.domNode.style.display="";this.selection=_1c+1;continue;}this.children[i].tabBtnWidget.deselect();this.children[i].tabViewWidget.domNode.style.display="none";this.children[i].tabViewWidget._visible=false;}if(this.children.length<=_1c){this.children[this.children.length].tabBtnWidget.select();this.children[this.children.length].tabViewWidget.domNode.style.display="";this.children[this.children.length].tabViewWidget._visible=true;this.selection=this.children.length;}else{if(_1c<0){this.children[0].tabBtnWidget.select();this.children[0].tabViewWidget.domNode.style.display="";this.children[0].tabViewWidget._visible=true;this.selection=1;}}}else{for(var i=0;i<this.children.length;i++){this.children[i].tabViewWidget._visible=false;this.children[i].tabViewWidget.domNode.style.visibility="visible";this.children[i].tabViewWidget.domNode.style.display="none";}if(this.children.length<=_1c){this.children[this.children.length].tabViewWidget._visible=true;this.children[this.children.length].tabViewWidget.domNode.style.display="";this.children[this.children.length].tabBtnWidget.defaultClickAction();this.selection=this.children.length;}else{if(_1c<0){this.children[0].tabViewWidget._visible=true;this.children[0].tabBtnWidget.defaultClickAction();this.children[0].tabViewWidget.domNode.style.display="";this.selection=1;}else{this.children[_1c].tabViewWidget._visible=true;this.children[_1c].tabBtnWidget.defaultClickAction();this.children[_1c].tabViewWidget.domNode.style.display="";this.selection=_1c+1;}}}}},"setID":function(id){if(id&&id!="undefined"){this.id=id;}else{this.id="";}},"setSegmentedControl":function(_1d){this.segmentedControl=_1d;},"getSegmentedControl":function(){return this.segmentedControl||false;},"getClassName":function(){return this._class;},"setClassName":function(_1e){this._class=_1e;},"getFixedBottom":function(){return this._fixedBottom;},"setFixedBottom":function(_1f){this._fixedBottom=_1f;},"getLayout":function(){return this._layout;},"setLayout":function(_20){this._layout=_20;}});