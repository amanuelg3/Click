egl.defineWidget("dojo.widgets","DojoTreeNode","dojo.widgets","DojoContainer","div",{"render":function(){this.eze$$ready=false;var _1=null;this.renderingStep=4;this.copyAttribute();this.eze$$DOMElement.eze$$widget=this;this.renderingStep=5;this.eze$$ready=true;this.printStartupMessage();egl.startVEWidgetTimer();},"getItem":function(){if(!this.item){this.item={id:this.id,text:this.text,parent:this.parent?this.parent.id:null};}if(this.children){this.item.children=this.getChildItems();}return this.item;},"getItemOnly":function(){this.selfitem={id:this.id,text:this.text,parent:this.parent?this.parent.id:null};return this.selfitem;},"getChildItems":function(){var _2=[];for(var n=0;n<this.children.length;n++){_2.push(this.children[n].getItem());}return _2;},"setText":function(_3){this.text=_3;if(this.tree&&this.tree.store){var _4=this;var _5=_4.tree;_5.store.fetchItemByIdentity({identity:_4.id,onItem:function(_6){try{_5.store.setValue(_6,"text",_3);_5.store.save();}catch(e){e.message="Cannot change DojoTreeNode \""+_5.id+"\" from \""+treeWidget.id+"\"";egl.printError("Invalid argument to DojoTreeNode.setText",e);}}});}},"getText":function(){return this.text;},"setID":function(id){this.id=id;},"getID":function(){return this.id;},"contains":function(_7){var _8=false;for(var i=0;i<this.children.length;i++){if(_7.id==this.children[i].id){_8=true;}}return _8;},"appendChild":function(_9){if(_9){if(!this.contains(_9)){this.children.appendElement(_9);}_9.parent=this;_9.setTree(this.tree);var _a=this;this.tree.store.fetchItemByIdentity({identity:this.id,onItem:function(_b){try{_a.tree.model.newItem(_9.getItemOnly(),_b);_a.tree.store.save();}catch(e){egl.printError("Cannot add treenode \""+_9.id+"\" to \""+_a.id+"\". Duplicate nodes not allowed.",e);}},onFail:function(){egl.printError("Cannot add treenode \""+_9.id+"\" to \""+_a.id+"\". Duplicate nodes not allowed.");}});if(_9.children&&_9.children.length){for(var i=0;i<this.children.length;i++){var _c=_9.children[i];_9.appendChild(_c);}}}},"getIndex":function(_d){if(this.children){for(var i=0;i<this.children.length;i++){if(_d.id==this.children[i].id){return i+1;}}}return -1;},"removeChild":function(_e){if(_e){this.tempchild=_e.id;if(_e.children&&_e.children.length>0){var _f=_e.children.length;for(var i=_e.children.length-1;i>=0;i--){var _10=_e.children[i];_e.removeChild(_10,_e.getIndex(_10));}}this.children.removeElement(this.getIndex(_e));var _11=this;this.tree.store.fetchItemByIdentity({identity:_e.id,onItem:function(_12){try{_11.tree.store.deleteItem(_12);_11.tree.store.save();}catch(e){e.message="Cannot remove DojoTreeNode \""+_e.id+"\" from \""+_11.id+"\"";egl.printError("Invalid argument to DojoTreeNode.removeChild",e);}}});}},"removeChildren":function(){var len=this.children.length;for(var n=len-1;n>=0;n--){this.removeChild(this.children[n]);}},"setChildren":function(_13){this.children=[];for(var n=0;n<_13.length;n++){var _14=_13[n];if(this.tree){this.appendChild(_14);}else{_14.parent=this;this.children.push(_14);}}},"getElementById":function(id){return this.tree.getElementById(id);},"getParent":function(){return this.parent;},"setTree":function(_15){this.tree=_15;this.tree.eglNodes[this.id]=this;if(this.children){for(var n=0;n<this.children.length;n++){this.children[n].setTree(_15);}}},"setBiDiMarkers":function(_16,_17){if(this.text&&(_16||_17)){var _18=_16=="Visual";var _19=_17=="Yes";this.text=this.setBiDiMarkersStr(this.text,_18,_19);this.setText(this.text);}if(this.children){for(var n=0;n<this.children.length;n++){var _1a;var _1b;if(!this.children[n].reverseTextDirectionThis){_1a=_17;}else{_1a=this.children[n].reverseTextDirectionThis;}if(!this.children[n].textLayoutThis){_1b=_16;}else{_1b=this.children[n].textLayoutThis;}this.children[n].setBiDiMarkers(_1b,_1a);}}}});