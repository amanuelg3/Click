egl.defineClass("org.eclipse.edt.rui.widgets","VisualHandlers",{"ReverseText":function(_1){reverseText(_1.eze$$DOMElement);},"BidiReorder":function(_2,_3,_4){return doBidiReorder(_2,_3,_4);},"AttachHandlers":function(_5){if(_5.textLayoutThis=="Visual"){if(!_5.eze$$DOMElement.maxLength||_5.eze$$DOMElement.maxLength<0||_5.eze$$DOMElement.maxLength>10000000){_5.eze$$DOMElement.maxLength=10000000;}_5.eze$$DOMElement.maxLength++;if(_5.eze$$DOMElement.tagName=="TEXTAREA"){_5.eze$$DOMElement.style.overflow="hidden";if(egl.IE){_5.eze$$DOMElement.style.wordWrap="normal";}else{_5.eze$$DOMElement.setAttribute("wrap","off");}}egl.addEventListener(_5.eze$$DOMElement,"copy",handleCopy,_5.eze$$DOMElement);egl.addEventListener(_5.eze$$DOMElement,"cut",handleCut,_5.eze$$DOMElement);egl.addEventListener(_5.eze$$DOMElement,"paste",handlePaste,_5.eze$$DOMElement);egl.addEventListener(_5.eze$$DOMElement,"dblclick",handleDblClick,_5.eze$$DOMElement);egl.addEventListener(_5.eze$$DOMElement,"mousedown",handleMouseDown,_5.eze$$DOMElement);egl.addEventListener(_5.eze$$DOMElement,"mouseup",handleMouseUp,_5.eze$$DOMElement);egl.addEventListener(_5.eze$$DOMElement,"blur",handleBlur,_5.eze$$DOMElement);egl.addEventListener(_5.eze$$DOMElement,"focus",handleFocus,_5.eze$$DOMElement);egl.addEventListener(_5.eze$$DOMElement,"mouseout",handleMouseOut,_5.eze$$DOMElement);egl.addEventListener(_5.eze$$DOMElement,"keydown",handleKeyDown,_5.eze$$DOMElement);egl.addEventListener(_5.eze$$DOMElement,"keyup",handleKeyUp,_5.eze$$DOMElement);egl.addEventListener(_5.eze$$DOMElement,"keypress",handleKeyPress,_5.eze$$DOMElement);}else{egl.removeEventListener(_5.eze$$DOMElement,"copy",handleCopy);egl.removeEventListener(_5.eze$$DOMElement,"cut",handleCut);egl.removeEventListener(_5.eze$$DOMElement,"paste",handlePaste);egl.removeEventListener(_5.eze$$DOMElement,"dblclick",handleDblClick);egl.removeEventListener(_5.eze$$DOMElement,"mousedown",handleMouseDown);egl.removeEventListener(_5.eze$$DOMElement,"mouseup",handleMouseUp);egl.removeEventListener(_5.eze$$DOMElement,"blur",handleBlur);egl.removeEventListener(_5.eze$$DOMElement,"focus",handleFocus);egl.removeEventListener(_5.eze$$DOMElement,"mouseout",handleMouseOut);egl.removeEventListener(_5.eze$$DOMElement,"keydown",handleKeyDown);egl.removeEventListener(_5.eze$$DOMElement,"keyup",handleKeyUp);egl.removeEventListener(_5.eze$$DOMElement,"keypress",handleKeyPress);}}});var CODE_BACKSPACE=8;var CODE_TAB=9;var CODE_ENTER=13;var CODE_PAGEUP=33;var CODE_PAGEDOWN=34;var CODE_END=35;var CODE_HOME=36;var CODE_ARROWLEFT=37;var CODE_ARROWRIGHT=39;var CODE_ARROWUP=38;var CODE_ARROWDOWN=40;var CODE_INSERT=45;var CODE_DELETE=46;var CODE_A=65;var CODE_Z=90;var CODE_CTRL=17;var adjustCaretOnKeyUp=false;var isFldreversed=false;var curPos=1;var selectionStart;var autoPush=false;var pushMode=false;var rightPushBound=0;var leftPushBound=0;var layerGuess=false;var swapChar=0;var hadnoFocus=true;var preventAltNumpad=false;var isOverwriteMozilla=false;var isArabic=false;var isLinux=false;var isIE=false;var fieldStart=0;var CR;var hint;var LF="\n";var Reorderer=null;isLinux=(navigator.platform.indexOf("Linux")!=-1)?true:false;if(isLinux){if(navigator.appName.indexOf("Netscape")==-1){alert("Use Firefox/Mozilla browser");}else{index=navigator.userAgent.indexOf("Netscape/");if((index>0)&&(parseInt(navigator.userAgent.substring(index+9,index+10))<7)){alert("To have full Bidi support use Netscape version 8 or above");}}}CR=(egl.IE)?"\r\n":"\n";isArabic=false;var hint;if(egl.IE){var hint=document.createElement("<div dir='ltr' id='hint' style=\"BACKGROUND-COLOR: rgb(255,255,128); COLOR: black; BORDER-BOTTOM-STYLE: groove; BORDER-LEFT-STYLE: groove; BORDER-RIGHT-STYLE: groove; BORDER-TOP-STYLE: groove; FONT-FAMILY: serif; FONT-SIZE: xx-small; HEIGHT: 100px; LEFT: 1px; POSITION: absolute; TOP: 1px; VISIBILITY: hidden; WIDTH: 320px; Z-INDEX: 1\"></div>");hint.innerText="Field reverse-'Alt+Numpad Numlock'\nAuto push-'Alt+Numpad /'\nPush on-'Shift+Numpad Numlock'\nPush off-'Shift+Numpad /'";}else{hint=document.createElement("div");hint.setAttribute("dir","ltr");hint.setAttribute("id","hint");hint.setAttribute("style","BACKGROUND-COLOR: rgb(255,255,128); COLOR: black; BORDER-BOTTOM-STYLE: groove; BORDER-LEFT-STYLE: groove; BORDER-RIGHT-STYLE: groove; BORDER-TOP-STYLE: groove; FONT-FAMILY: serif; FONT-SIZE: small; HEIGHT: 100px; LEFT: 1px; POSITION: absolute; TOP: 1px; VISIBILITY: hidden; WIDTH: 320px; Z-INDEX: 1");if(isLinux){hint.innerHTML="Field reverse-'Shift+Numpad 4'<br>Auto push-'Shift+Numpad 6'<br>Push on-'Shift+Numpad 7'<br>Push off-'Shift+Numpad 8'";}else{hint.innerHTML="Field reverse-'Alt+Numpad Numlock'<br>Auto push-'Alt+Numpad /'<br>Push on-'Shift+Numpad Numlock'<br>Push off-'Shift+Numpad /'";}}var body=document.getElementsByTagName("BODY");body[0].appendChild(hint);function isOverWriteMode(){if(egl.IE){return document.queryCommandValue("OverWrite");}else{return isOverwriteMozilla;}};function doBidiReorder(_6,_7,_8){if(_7==_8){return _6;}var _9=_7.substring(0,1);var _a=_7.substring(1,4);var _b=_8.substring(0,1);var _c=_8.substring(1,4);if((_9=="L")&&(_b=="V")&&(_c=="LTR")){if(_a=="LTR"){return reorderTextLTR(null,_6,false);}if(_a=="RTL"){return reorderTextRTL(null,_6,false);}}if((_9=="V")&&(_b=="V")){return invertStr(_6);}if((_9=="L")&&(_b=="V")&&(_c=="RTL")){if(_a==LTR){_6=reorderTextLTR(null,_6,false);}else{_6=reorderTextRTL(null,_6,false);}return invertStr(_6);}if((_9=="V")&&(_a=="LTR")&&(_b=="L")&&(_c=="LTR")){return reorderTextLTR(null,_6,false);}if((_9=="V")&&(_b=="L")&&(_a!=_c)){_6=invertStr(_6);if(_a="RTL"){return doBidiReorder(_6,"LLTR","VLTR");}else{return doBidiReorder(_6,"LRTL","VRTL");}}if((_9=="V")&&(_b=="L")&&(_a=="RTL")&&(_c=="RTL")){return doBidiReorder(_6,"LRTL","VRTL");}if((_9=="L")&&(_b=="L")&&(_a!=_c)){if(_a=="RTL"){_6=reorderTextRTL(null,_6,false);return doBidiReorder(_6,"VLTR","LLTR");}else{_6=reorderTextLTR(null,_6,false);return doBidiReorder(_6,"VLTR","LRTL");}}};function reorderTextLTR(_d,_e,_f){Reorderer=new JSReorder(0);return reorderText(_d,_e,_f);};function reorderTextRTL(obj,_10,_11){Reorderer=new JSReorder(1);return reorderText(obj,_10,_11);};function reorderText(obj,_12,_13){if(Reorderer==null){Reorderer=new JSReorder(0);}var _14="";if(_13&&((obj!=null)&&(obj.style.direction=="rtl"))){var len=_12.length;for(i=0;i<len;i++){symbol=_12.charAt(len-i-1);symbol=doSymSwap(symbol);_14+=symbol;}}else{_14=_12;}_14=Reorderer.doReorder(_14);if(!_13&&((obj!=null)&&(obj.style.direction=="rtl"))){var len=_12.length;_12=_14;_14="";for(i=0;i<len;i++){symbol=_12.charAt(len-i-1);symbol=doSymSwap(symbol);_14+=symbol;}}return _14;};function processCopy(obj){var _15;if(egl.IE){var _16=document.selection.createRange();_15=_16.text;}else{_15=obj.value.substring(obj.selectionStart,obj.selectionEnd);}if((_15.charAt(0)==egl.LRO)||(_15.charAt(0)==egl.RLO)){_15=_15.substring(1);}var _17=reorderText(obj,_15,true);if(egl.IE){window.clipboardData.setData("Text",_17);return true;}};function ajustCaretPositions(_18,obj){if((fieldStart>0)&&(selectionStart==curPos)){preventEraseMarker(obj);var _19=getCaretPos(_18,obj);if(_19){selectionStart=Math.min(_19[0],_19[1]);curPos=Math.max(_19[0],_19[1]);}}};function handleSelect(e){var obj=this;if(egl.IE){if(document.selection.createRange().text.length==obj.value.length){e=window.event;handleDblClick(e);preventDefault(e);}}else{if((obj.selectionEnd-obj.selectionStart)==obj.value.length){handleDblClick(e);preventDefault(e);}}};function handleCopy(e){if(egl.IE){e=window.event;preventDefault(e);ajustCaretPositions(e,this);return processCopy(this);}};function handleCut(e){var obj=this;ajustCaretPositions(e,obj);if(pushMode){if(egl.IE){leftPushBound-=Math.abs(selectionStart-curPos);}else{leftPushBound-=Math.abs(obj.selectionStart-obj.selectionEnd);}}var ret=processCopy(obj);if(!ret){return false;}if(egl.IE){e=window.event;curPos=Math.min(selectionStart,curPos);selectionStart=curPos;preventDefault(e);var _1a=document.selection.clear();}else{curPos=obj.selectionStart;obj.value=obj.value.substring(0,curPos)+obj.value.substring(obj.selectionEnd);obj.setSelectionRange(curPos,curPos);}return true;};function handlePaste(e){if(egl.IE){e=window.event;var obj=this;ajustCaretPositions(e,obj);preventDefault(e);var _1b=document.selection.createRange();var _1c=window.clipboardData.getData("Text");selectionStart=Math.min(selectionStart,curPos);_1b.text=reorderText(obj,_1c,false);selectionStart=curPos=selectionStart+_1c.length;if(fieldStart>0){adjustCaretOnKeyUp=true;}if(pushMode){toggleFieldOrient(obj,true,false);}}};function handleDblClick(e){var obj=this;if(!obj.type&&egl.IE){obj=e.srcElement;}fieldStart=(obj.type.toLowerCase()=="textarea")?0:1;selectionStart=fieldStart;curPos=obj.value.length;if(pushMode){toggleFieldOrient(obj,false,false);pushMode=false;}setSelectedRange(obj,selectionStart,curPos);preventDefault(e);};function getCaretPos(_1d,obj){if(!egl.IE){return new Array(_1d.target.selectionStart,_1d.target.selectionEnd);}else{var _1e=document.selection.createRange().duplicate();var _1f=_1e.duplicate();var _20=_1e.text.length;if(obj.type=="textarea"){_1f.moveToElementText(obj);}else{_1f.expand("textedit");}var _21=_1f.offsetLeft==_1e.offsetLeft;while(_1e.compareEndPoints("StartToStart",_1f)>0){_1e.moveStart("character",-1);}var _22=_1e.text.length;if(obj.type=="textarea"&&(obj.value.charAt(_22)=="\r")){if(((_1d.type!="mouseup"||_20==0)&&_21)||(_1d.type=="mouseup"&&!_21&&(_1d.offsetX<5)&&(_1d.offsetX>0))){_22+=2;}}return new Array(_22-_20,_22);}};function handleMouseDown(e){if(egl.IE){e=window.event;fieldStart=(this.type=="textarea")?0:1;if(selectionStart!=curPos){setSelectedRange(this,fieldStart,fieldStart);}}if(e.button==2){var _23=document.getElementById("hint");if(_23!=null){var _24=(_23.length>0)?_23[0]:_23;_24.style.left=((e.clientX>=_23.scrollWidth)?(e.clientX-_23.scrollWidth):0)+"px";_24.style.top=e.clientY+"px";_24.style.visibility="visible";}}};function handleMouseUp(e){var _25=document.getElementById("hint");if(_25!=null){if(_25.length>0){_25[0].style.visibility="hidden";}else{_25.style.visibility="hidden";}}if(egl.IE){e=window.event;}obj=this;var _26=getCaretPos(e,obj);if(_26&&(!egl.IE||e.button!=2)){selectionStart=Math.min(_26[0],_26[1]);curPos=Math.max(_26[0],_26[1]);if(fieldStart>0&&selectionStart==0){if(egl.IE){var rng=document.selection.createRange();rng.moveStart("character",fieldStart);selectionStart=fieldStart;if(curPos==0){curPos=fieldStart;}rng.select();}else{if(curPos!=selectionStart){obj.setSelectionRange(selectionStart+1,curPos);}else{obj.setSelectionRange(selectionStart+1,curPos+1);}}}}if(pushMode&&((curPos>leftPushBound)||(selectionStart<rightPushBound))){toggleFieldOrient(obj,true,false);}};function handleContextmenu(e,obj){if(egl.IE){try{obj=this;e=window.event;var _27=getCaretPos(e,obj);if(_27){selectionStart=Math.min(_27[0],_27[1]);curPos=Math.max(_27[0],_27[1]);}}catch(_e){}}};function handleBlur(){var obj=this;if(!isLinux||!preventAltNumpad){if(pushMode){toggleFieldOrient(obj,false,false);pushMode=false;}if(isFldreversed){processFieldReverse(obj,false);}}};function handleFocus(){var obj=this;var _28=obj.value;isFldreversed=false;fieldStart=(obj.type=="textarea")?0:1;if(egl.IE){e=window.event;var _29=getCaretPos(e,obj);if(_29){selectionStart=Math.min(_29[0],_29[1]);curPos=Math.max(_29[0],_29[1]);if(selectionStart==0&&fieldStart>0){var rng=document.selection.createRange();rng.moveStart("character",fieldStart);rng.select();selectionStart=curPos=fieldStart;}}}if(_28.length==0){obj.style.textAlign=(obj.style.direction=="ltr")?"left":"right";}if(isLinux&&(curPos>0)){obj.setSelectionRange(curPos,curPos);}};function handleMouseOut(){var _2a=document.getElementById("hint");if(_2a!=null){if(_2a.length>0){_2a[0].style.visibility="hidden";}else{_2a.style.visibility="hidden";}}};function swapBrackets(_2b,_2c,_2d){if(isLinux){if(_2c^(layerGuess&&!isArabic)){if(_2d==40){_2d=41;}else{if(_2d==41){_2d=40;}else{if(_2d==60){_2d=62;}else{if(_2d==62){_2d=60;}else{if(_2d==91){_2d=93;}else{if(_2d==93){_2d=91;}else{if(_2d==123){_2d=125;}else{if(_2d==125){_2d=123;}}}}}}}}}return _2d;}else{if(!_2c&&layerGuess){if(swapChar==219){if(!this.isArabic){_2d=(_2b.shiftKey)?123:91;}}else{if(swapChar==221){if(!this.isArabic){_2d=(_2b.shiftKey)?125:93;}}else{if(_2b.shiftKey&&(swapChar==48)){_2d=41;}else{if(_2b.shiftKey&&(swapChar==57)){_2d=40;}else{if(!this.isArabic&&_2b.shiftKey&&(swapChar==188)){_2d=60;}else{if(!this.isArabic&&_2b.shiftKey&&(swapChar==190)){_2d=62;}else{if(this.isArabic){if(swapChar==68){_2d=91;}else{if(swapChar==70){_2d=93;}}if(swapChar==67){_2d=123;}else{if(swapChar==86){_2d=125;}}}}}}}}}}else{if(_2c&&!layerGuess){if(swapChar==219){_2d=(_2b.shiftKey)?125:93;}else{if(swapChar==221){_2d=(_2b.shiftKey)?123:91;}else{if(_2b.shiftKey&&(swapChar==48)){_2d=40;}else{if(_2b.shiftKey&&(swapChar==57)){_2d=41;}else{if(_2b.shiftKey&&(swapChar==188)){_2d=62;}else{if(_2b.shiftKey&&(swapChar==190)){_2d=60;}}}}}}}else{if(this.isArabic&&_2c&&layerGuess){if(swapChar==219){_2d=62;}else{if(swapChar==221){_2d=60;}}}}}}swapChar=0;return _2d;};function handleKeyPress(e){if(egl.IE){e=window.event;}var obj=this;if(preventAltNumpad||(e.returnValue==false)){preventDefault(e);return;}var _2e=null;var _2f;var _30=_2f=(obj.style.direction=="rtl");if(egl.IE){e.keyCode=swapBrackets(e,_2f,e.keyCode);ieKey=e.keyCode;if(isArabic&&layerGuess&&(ieKey>47)&&(ieKey<58)){ieKey=e.keyCode=ieKey+1584;}}else{ieKey=e.charCode;if(e.keyCode==CODE_INSERT){isOverwriteMozilla=!isOverwriteMozilla;}else{if((ieKey>31)&!e.altKey&!e.ctrlKey){charCode=swapBrackets(e,_2f,e.charCode);if(charCode!=ieKey){_2e=charCode;}else{if(isArabic&&layerGuess&&(ieKey>47)&&(ieKey<58)){_2e=ieKey+1584;}}}}}if((e.keyCode==CODE_ENTER)&&(obj.rows==1)){preventDefault(e);return;}if(!egl.IE&&((e.keyCode==8)||(e.keyCode==46))){return;}if(((ieKey>64)&(ieKey<91))||((ieKey>96)&(ieKey<123))){layerGuess=_30=false;}else{if(ieKey>1487){layerGuess=_30=true;isArabic=(ieKey>1547)?true:false;}else{if(ieKey==32){_30=layerGuess;}else{if(_2f&&((ieKey>47)&&(ieKey<58))){_30=false;}}}}if(autoPush){if(_2f!=_30){curPos=(egl.IE)?curPos:obj.selectionEnd;toggleFieldOrient(obj,true,pushMode&&(curPos==leftPushBound));}}if((ieKey>31)&&!e.altKey&&!e.ctrlKey){preventEraseMarker(obj);var _31=(egl.IE)?curPos:obj.selectionStart;var _32=(egl.IE)?Math.abs(selectionStart-curPos):obj.selectionEnd-obj.selectionStart;if(!isOverWriteMode()||(_32>0)){if(obj.value.length-_32>=obj.maxLength){preventDefault(e);return;}}else{if(_31>=obj.maxLength){preventDefault(e);return;}}if(pushMode){if(!isOverWriteMode()||(leftPushBound==_31)||(_32>0)){leftPushBound+=1-_32;}}if(egl.IE){if(_32>0){preventDefault(e);var _33=document.selection.createRange();_33.text=String.fromCharCode(ieKey);_33.select();}selectionStart=curPos=Math.min(selectionStart,curPos)+1;}else{if(isLinux&&_2f&&isArabic&&(ieKey>1487)){_2e=(_2e!=null)?_2e:ieKey;e.preventDefault();curPos=obj.selectionStart;if(isOverWriteMode()&&(obj.selectionStart==obj.selectionEnd)){text=obj.value.substring(0,obj.selectionStart)+String.fromCharCode(_2e)+obj.value.substring(obj.selectionEnd+1);}else{text=obj.value.substring(0,obj.selectionStart)+String.fromCharCode(_2e)+obj.value.substring(obj.selectionEnd);}obj.value=ara_type(obj.selectionStart,text,_2f);obj.setSelectionRange(curPos+1,curPos+1);}else{if((_2e!=null)||isOverWriteMode()){_2e=(_2e!=null)?_2e:ieKey;e.preventDefault();replaceFieldText(obj,_2e);}}}}};function replaceFieldText(obj,_34){curPos=obj.selectionStart;if(isOverWriteMode()&&(obj.selectionStart==obj.selectionEnd)){obj.value=obj.value.substring(0,obj.selectionStart)+String.fromCharCode(_34)+obj.value.substring(obj.selectionEnd+1);}else{obj.value=obj.value.substring(0,obj.selectionStart)+String.fromCharCode(_34)+obj.value.substring(obj.selectionEnd);}obj.setSelectionRange(curPos+1,curPos+1);};function handleKeyUp(e){if(egl.IE){e=window.event;}var obj=this;var _35=e.keyCode;var _36=(obj.style.direction=="ltr")?false:true;if(!egl.IE){curPos=obj.selectionStart;}if(((_35==CODE_ARROWLEFT)&&(_36==false))||((_35==CODE_ARROWRIGHT)&&(_36==true))){if(pushMode&&(curPos<rightPushBound)){toggleFieldOrient(obj,true,false);}}else{if(((_35==CODE_ARROWRIGHT)&&(_36==false))||((_35==CODE_ARROWLEFT)&&(_36==true))){if(pushMode&&(curPos>leftPushBound)){toggleFieldOrient(obj,true,false);}}}if(_35==CODE_ARROWUP||_35==CODE_ARROWDOWN||(e.shiftKey&&(_35==CODE_HOME||_35==CODE_END))||(egl.IE&&(e.ctrlKey||adjustCaretOnKeyUp)&&(_35==CODE_Z||_35==CODE_CTRL))){if(pushMode&&!adjustCaretOnKeyUp){toggleFieldOrient(obj,true,false);}var _37=getCaretPos(e,obj);if(_37){selectionStart=Math.min(_37[0],_37[1]);curPos=Math.max(_37[0],_37[1]);}adjustCaretOnKeyUp=false;}else{if(_35==CODE_HOME||_35==CODE_PAGEUP){processHome(obj,e);}else{if(_35==CODE_END||_35==CODE_PAGEDOWN){processEnd(obj,e);}else{if(adjustCaretOnKeyUp){setSelectedRange(obj,selectionStart,curPos);adjustCaretOnKeyUp=false;}}}}};function handleKeyDown(e){if(egl.IE){e=window.event;}var obj=this;var _38=e.keyCode;if(_38==18){preventAltNumpad=true;}else{if(!e.altKey){preventAltNumpad=false;}}fieldDirection=(obj.style.direction=="ltr")?false:true;swapChar=_38;if(e.shiftKey){processPush(obj,_38);}if((!isLinux&&e.shiftKey&&e.altKey)||(isLinux&&(_38==18))){layerGuess=!layerGuess;}if((e.altKey&&!isLinux)||(e.shiftKey&&isLinux)){if(((_38==111)&&!isLinux)||((_38==102)&&isLinux)){autoPush=!autoPush;if(pushMode){toggleFieldOrient(obj,true,false);}preventAltNumpad=true;}else{if(((_38==144)&&!isLinux)||((_38==100)&&isLinux)){processFieldReverse(obj,true);preventAltNumpad=true;}}}else{if(_38==CODE_BACKSPACE){processBackspace(obj,e);}else{if(_38==CODE_DELETE){processDelete(obj);}else{if(egl.IE){if(e.ctrlKey){if(_38==CODE_A){handleDblClick(e);}else{if(_38==CODE_Z){adjustCaretOnKeyUp=true;}}}else{if(_38==CODE_ENTER){if(pushMode){toggleFieldOrient(obj,false,false);}if(obj.type=="textarea"){selectionStart=curPos=curPos+2;}}else{if((_38==CODE_HOME)||(_38==CODE_END)||(_38==CODE_PAGEUP)||(_38==CODE_PAGEDOWN)){if(!e.shiftKey){preventDefault(e);}}else{if(((_38==37)&(fieldDirection==0))|((_38==39)&(fieldDirection==1))){processLeftarrow(obj,e);}else{if(((_38==39)&(fieldDirection==0))|((_38==37)&(fieldDirection==1))){processRightarrow(obj,e);}}}}}}else{if(e.ctrlKey&&(_38==88||_38==67||_38==86)){preventEraseMarker(obj);}}}}}};function preventDefault(_39){if(egl.IE){_39.returnValue=false;}else{_39.preventDefault();}};function doSymSwap(_3a){switch(_3a){case "(":_3a=")";break;case ")":_3a="(";break;case "{":_3a="}";break;case "}":_3a="{";break;case "[":_3a="]";break;case "]":_3a="[";break;case "<":_3a=">";break;case ">":_3a="<";break;}return _3a;};function setSelectedRange(obj,_3b,_3c){if(egl.IE){var _3d=obj.createTextRange();if(_3d){if(obj.type=="textarea"){_3d.moveToElementText(obj);len=_3c;for(var i=fieldStart;i<len;i++){if((obj.value.charAt(i)=="\r")){_3b--;_3c--;}}}else{_3d.expand("textedit");}_3d.collapse();_3d.moveEnd("character",_3c);_3d.moveStart("character",_3b);_3d.select();}}else{obj.setSelectionRange(_3b,_3c);}};function processHome(obj,_3e){var _3f=getLineBoundaries(obj);var _40=(obj.type=="textarea")?_3f[0]+1:_3f[0];var _41=(obj.type=="textarea")?_3f[1]:_3f[1]+1;if(pushMode){selectionStart=curPos=_41;}else{selectionStart=curPos=_40;}setSelectedRange(obj,selectionStart,curPos);if(pushMode&(curPos>leftPushBound)){toggleFieldOrient(obj,true,false);}preventDefault(_3e);};function processEnd(obj,_42){var _43=getLineBoundaries(obj);var _44=(obj.type=="textarea")?_43[0]+1:_43[0];var _45=(obj.type=="textarea")?_43[1]:_43[1]+1;if(pushMode){selectionStart=curPos=_44;}else{selectionStart=curPos=_45;}setSelectedRange(obj,selectionStart,curPos);if(pushMode&(curPos<rightPushBound)){toggleFieldOrient(obj,true,false);}preventDefault(_42);};function getLineBoundaries(obj){var len=obj.value.length;var _46=(egl.IE)?selectionStart:obj.selectionStart;var _47=fieldStart,_48=len-1;if(obj.type=="textarea"){for(_47=_46;_47>=fieldStart;_47--){if(obj.value.charAt(_47)==LF){break;}}for(_48=curPos;_48<len;_48++){if((obj.value.charAt(_48)==LF)||(obj.value.charAt(_48)=="\r")){break;}}}return new Array(_47,_48);};function toggleFieldOrient(obj,_49,_4a){var _4b=0;if(!egl.IE){selectionStart=obj.selectionStart;curPos=obj.selectionEnd;}obj.style.direction=(obj.style.direction=="rtl")?"ltr":"rtl";if(obj.value.charAt(0)==egl.LRO){obj.value=egl.RLO+obj.value.substring(1);}else{if(obj.value.charAt(0)==egl.RLO){obj.value=egl.LRO+obj.value.substring(1);}}var _4c=getLineBoundaries(obj);reverseText(obj);if(_49){var _4d=_4c[0];var _4e=_4c[1];pushMode=!pushMode;if(pushMode){_4b=Math.abs(selectionStart-curPos);leftPushBound=rightPushBound=selectionStart=_4e+1-Math.max(selectionStart,curPos)+_4d;curPos=selectionStart+_4b;}else{if(_4a){curPos=rightPushBound;}selectionStart=curPos=_4e+1-curPos+_4d;}setSelectedRange(obj,selectionStart,curPos);}};function processPush(obj,_4f){if(((_4f==144)&&!isLinux)||((_4f==103)&&isLinux)){preventAltNumpad=true;if(!pushMode){toggleFieldOrient(obj,true,true);}}else{if(((_4f==111)&&!isLinux)||((_4f==104)&&isLinux)){preventAltNumpad=true;if(pushMode){toggleFieldOrient(obj,true,true);}}}};function reverse(_50){var len=_50.length;var _51="";for(i=0;i<len;i++){symbol=_50.charAt(len-i-1);symbol=doSymSwap(symbol);_51+=symbol;}return _51;};function reverseText(obj){var _52=obj.value;var _53="";if(_52.charAt(0)==egl.LRO||_52.charAt(0)==egl.RLO){_53=_52.charAt(0)+reverse(_52.substring(1));}else{textPool=_52.split(CR);_53+=reverse(textPool[0]);for(var j=1;j<textPool.length;j++){_53+=CR+reverse(textPool[j]);}}if(isLinux&&isArabic){obj.value=ara_type(0,_53,(obj.style.direction=="rtl"));}else{obj.value=_53;}};function processFieldReverse(obj,_54){isFldreversed=!isFldreversed;var len=obj.value.length;if(!egl.IE){curPos=obj.selectionStart;}if(len==fieldStart){obj.style.textAlign=(obj.style.direction=="rtl")?"left":"right";_54=false;}var _55=getLineBoundaries(obj);toggleFieldOrient(obj,false,false);if(_54){var _56=_55[0];var _57=_55[1];selectionStart=curPos=_57+1-curPos+_56;setSelectedRange(obj,selectionStart,curPos);}};function preventEraseMarker(obj){if(fieldStart>0){if(egl.IE){var rng=document.selection.createRange();var _58=rng.text.charAt(0);if((_58==egl.LRO)||(_58==egl.RLO)){rng.moveStart("character",fieldStart);rng.select();curPos=fieldStart;}}else{if(obj.selectionStart<fieldStart){if(obj.selectionStart!=obj.selectionEnd){obj.setSelectionRange(obj.selectionStart+1,obj.selectionEnd);}else{obj.setSelectionRange(obj.selectionStart+1,obj.selectionEnd+1);}}}}};function processDelete(obj){if(!egl.IE){selectionStart=obj.selectionStart;curPos=obj.selectionEnd;}if(pushMode&&(selectionStart<leftPushBound)){if(selectionStart==curPos){leftPushBound--;}else{leftPushBound-=Math.abs(selectionStart-curPos);}}preventEraseMarker(obj);if(egl.IE){selectionStart=curPos=Math.min(selectionStart,curPos);}};function processBackspace(obj,_59){var _5a;if(egl.IE){var _5b=document.selection.createRange();_5a=((_5b.text).length==0);}else{selectionStart=obj.selectionStart;curPos=obj.selectionEnd;_5a=(selectionStart==curPos);}if(_5a){if(curPos>fieldStart){if(pushMode&&(curPos<=rightPushBound)){if(egl.IE){_59.returnValue=false;}else{_59.preventDefault();preventAltNumpad=true;}return;}curPos=(egl.IE&&(obj.value.charAt(curPos-1)==LF))?curPos-2:curPos-1;if(pushMode){leftPushBound--;}}else{preventDefault(_59);return;}}else{if(pushMode){leftPushBound-=Math.abs(selectionStart-curPos);}preventEraseMarker(obj);curPos=Math.min(selectionStart,curPos);}selectionStart=curPos;};function processLeftarrow(obj,_5c){if(curPos>fieldStart){if(_5c.shiftKey){if(selectionStart==curPos){selectionStart=curPos;}curPos=(egl.IE&&(obj.value.charAt(curPos-1)==LF))?curPos-2:curPos-1;}else{if(selectionStart!=curPos){selectionStart=curPos=Math.min(selectionStart,curPos);}else{selectionStart=curPos=(egl.IE&&(obj.value.charAt(curPos-1)==LF))?curPos-2:curPos-1;}}}else{preventDefault(_5c);}};function processRightarrow(obj,_5d){var _5e=obj.value;if(curPos<_5e.length){if(_5d.shiftKey){if(selectionStart==curPos){selectionStart=curPos;}curPos=(egl.IE&&(obj.value.charAt(curPos+1)==LF))?curPos+2:curPos+1;}else{if(selectionStart!=curPos){selectionStart=curPos=Math.max(selectionStart,curPos);}else{selectionStart=curPos=(egl.IE&&(obj.value.charAt(curPos+1)==LF))?curPos+2:curPos+1;}}}else{preventDefault(_5d);}};function JSReorder(_5f){if(_5f==null){this.LogicalRTL=0;}else{this.LogicalRTL=_5f;}this.INIT=0;this.LATIN=1;this.LOCAL=2;this.NEUTRAL=3;this.LOCALNUMBER=4;this.LATINNUMBER=5;this.LATINNUMERICTERMINATOR=6;this.NUMERICSEPARATOR=8;this.ENDOFLINE=9;this.CARRIAGERETURN=10;this.LINEFEED=11;this.SPACE=12;this.ARABICDIGIT=13;this.SEGMENTSEPARATOR=14;this.BLOCKSEPARATOR=15;this.BIDISPECIAL=16;this.NONSEGMENTMARKER=17;this.LATIN_STATE=0;this.LOCAL_STATE=1;this.LATIN_NUM_STATE=2;this.LOCAL_NUM_STATE=3;this.NEUTRAL_STATE=4;this.EOL_STATE=5;this.MASK_STATE=255;this.MASK_ACTION=65280;this.ACTION=16384;this.NL=16640;this.NR=16896;this.LN=17152;this.LocalInvert=1;this.LocalNumInvert=2;this.LatinInvert=3;this.AllLineInvert=4;var NL=this.NL;var NR=this.NR;var LN=this.LN;this.StateTable=new Table(6,10);if(this.LogicalRTL==1){this.StateTable.initTable(1,0,1,4,-1,2,-1,-1,4,5,1,0,1,1,-1,LN|3,-1,-1,1,5,1,0,1,4,-1,2,-1,-1,0,5,1,0,1,1,-1,3,-1,-1,1,5,NR|1,NL|0,NR|1,4,-1,NL|2,-1,-1,4,NR|5,1,0,1,1,-1,3,-1,-1,1,5);}else{this.StateTable.initTable(0,0,1,0,-1,2,-1,-1,0,5,0,0,1,4,-1,3,-1,-1,4,5,0,0,1,0,-1,2,-1,-1,0,5,0,0,1,4,-1,3,-1,-1,4,5,NL|0,NL|0,NR|1,4,-1,NR|3,-1,-1,4,NL|5,0,0,1,0,-1,2,-1,-1,0,5);}function _60(){return this.UnicodeSymmSwap;};function _61(_62){var i,mid,low,_63;var ss=this.getUnicodeSymmSwap().getArray();for(i=0;i<_62.length;i++){if(this.stringAsClasses[i]!=this.LOCAL){continue;}low=0;_63=this.SIZE_OF_UNISYMM-1;while(low<_63){mid=Math.ceil((low+_63)/2);if(_62[i]<ss[mid][0]){_63=mid-1;}else{if(_62[i]>ss[mid][0]){low=mid+1;}else{_62[i]=ss[mid][1];break;}}}if(low==_63&&_62[i]==ss[low][0]){_62[i]=ss[low][1];}}};this.getStateTable=getStateTable;this.StateToClass=new Array(this.LATIN,this.LOCAL,this.LATINNUMBER,this.LOCALNUMBER,this.NEUTRAL,this.ENDOFLINE);var I=this.INIT;var L=this.LATIN;var R=this.LOCAL;var D=this.LATINNUMBER;var X=this.LATINNUMERICTERMINATOR;var E=this.NUMERICSEPARATOR;var N=this.NEUTRAL;var S=this.SPACE;var C=this.CARRIAGERETURN;var F=this.LINEFEED;var A=this.ARABICDIGIT;var G=this.SEGMENTSEPARATOR;var B=this.BLOCKSEPARATOR;var H=this.BIDISPECIAL;var M=this.NONSEGMENTMARKER;this.UnicodeTable=new Table(9,256);this.UnicodeTable.initTable(N,N,N,N,N,N,N,N,N,I,F,N,N,C,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,S,N,N,X,X,X,N,N,N,N,N,N,E,N,E,E,D,D,D,D,D,D,D,D,D,D,E,N,N,N,N,N,N,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,N,N,N,N,N,N,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,S,N,X,X,X,X,N,N,N,N,N,N,N,N,N,N,X,X,D,D,N,N,N,N,N,D,N,N,N,N,N,N,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,N,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,N,L,L,L,L,L,L,L,L,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,N,N,L,L,L,L,L,L,L,N,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,N,L,N,N,N,N,N,N,N,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,N,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,N,R,R,R,R,R,R,R,R,R,R,N,N,N,N,N,N,N,N,N,N,N,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,N,N,N,N,N,R,R,R,R,R,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,R,N,N,N,N,N,N,N,N,N,N,N,N,N,N,R,N,N,N,N,N,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,N,N,N,N,N,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,N,N,N,N,N,N,N,N,N,N,N,N,N,A,A,A,A,A,A,A,A,A,A,X,A,A,R,N,N,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,N,N,R,R,R,R,R,N,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,N,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,N,N,D,D,D,D,D,D,D,D,D,D,N,N,N,N,N,N,S,S,S,S,S,S,S,E,S,S,S,S,N,N,L,R,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,B,B,H,N,N,N,H,N,X,X,X,X,X,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,H,H,H,H,D,N,N,N,D,D,D,D,D,D,X,X,N,N,N,N,D,D,D,D,D,D,D,D,D,D,X,X,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,X,X,X,X,X,X,X,X,X,X,X,X,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,S,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,N,N,N,N,L,L,L,L,L,L,N,N,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,N,L,L,L,L,L,L,L,N,N,N,N,N,N,N,N,N,N,N,N,L,L,L,L,L,N,N,N,N,N,N,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,N,R,R,R,R,R,N,R,N,R,R,N,R,R,N,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,R,R,R,N,R,N,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,D,D,D,D,D,D,D,D,D,D,N,N,N,N,N,N,N,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,N,N,N,N,N,N,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,N,N,N,N,N,N,N,N,N,N,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,N,N,N,L,L,L,L,L,L,N,N,L,L,L,L,L,L,N,N,L,L,L,L,L,L,N,N,L,L,L,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N);this.SIZE_OF_UNISYMM=24;this.UnicodeSymmSwap=new Table(this.SIZE_OF_UNISYMM,2);this.UnicodeSymmSwap.initTable("(",")",")","(","<",">",">","<","[","]","]","[","{","}","}","{","\xab","\xbb","\xbb","\xab","\u207d","\u207e","\u207e","\u207d","\u208d","\u208e","\u208e","\u208d","\u2329","\u232a","\u232a","\u2329","\ufe59","\ufe5a","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe65","\ufe64");this.getUnicodeSymmSwap=_60;this.DoSymSwap=_61;this.getUnicodeTable=getUnicodeTable;this.stringAsClasses=new Array();this.terminatorFlag=0;this.doReorder=doReorder;this.stringToClass=stringToClass;this.applyClass=applyClass;this.getCharClass=getCharClass;this.getCharacterType=getCharacterType;this.doAction=doAction;this.invertSegment=invertSegment;this.needInvert=needInvert;};function getStateTable(){return this.StateTable;};function getUnicodeTable(){return this.UnicodeTable;};function getCharacterType(ch){var _64=this.getUnicodeTable().getArray();var str=new String(ch);var _65=str.charCodeAt(0);var _66=(_65&65280)>>8;switch(_66){case 0:break;case 5:_66=1;break;case 6:_66=2;break;case 32:_66=3;break;case 33:_66=4;break;case 48:_66=5;break;case 251:_66=6;break;case 254:_66=7;break;case 255:_66=8;break;default:return (this.NEUTRAL);}return (_64[_66][_65&255]);};function doReorder(str){var _67=new Array(str.length);var Str=new String("");var i;for(i=0;i<str.length;i++){_67[i]=str.charAt(i);}this.stringToClass(str);this.DoSymSwap(_67);if(this.LogicalRTL==1){this.invertSegment(_67,this.LatinInvert);this.invertSegment(_67,this.LocalNumInvert);this.invertSegment(_67,this.AllLineInvert);}else{this.invertSegment(_67,this.LocalNumInvert);this.invertSegment(_67,this.LocalInvert);}for(i=0;i<_67.length;i++){Str+=_67[i];}return (Str);};function stringToClass(str){var _68=this.getStateTable().getArray();var _69=0;var _6a=this.LATIN;if(this.LogicalRTL==1){_6a=this.LOCAL;}var _6b=_68[_69][_6a];var _6c;var i;for(i=0;i<str.length;i++){_69=_6b;_6c=this.getCharClass(str,i);_6b=_68[_69][_6c];this.stringAsClasses[i]=this.StateToClass[_6b&this.MASK_STATE]|this.terminatorFlag;this.doAction(_6b,i);_6b&=this.MASK_STATE;}for(i=0;i<str.length;i++){if((this.stringAsClasses[i]&this.MASK_ACTION)==this.ACTION){this.stringAsClasses[i]&=this.MASK_STATE;}}};function getCharClass(str,_6d){var _6e=this.NEUTRAL;var _6f=this.NEUTRAL;var _70;var _71;this.terminatorFlag=0;if(_6d>0){_6e=this.getCharacterType(str.charAt(_6d-1));}_70=this.getCharacterType(str.charAt(_6d));switch(_70){case this.BLOCKSEPARATOR:case this.SEGMENTSEPARATOR:_71=this.LATIN;break;case this.NONSEGMENTMARKER:_71=_6e;break;case this.ARABICDIGIT:_71=this.LATINNUMBER;break;case this.LATINNUMERICTERMINATOR:if(_6d>0){_6e=this.stringAsClasses[_6d-1];}var j;for(j=_6d+1;j<str.length;j++){_6f=this.getCharacterType(str.charAt(j));if(_6f!=this.LATINNUMERICTERMINATOR){break;}}if(_6e==this.LATINNUMBER||_6e==this.LOCALNUMBER||_6f==this.LATINNUMBER||_6f==this.LOCALNUMBER){_71=this.LATINNUMBER;}else{this.terminatorFlag=this.ACTION;_71=this.NEUTRAL;}break;case this.LATINNUMBER:var j;for(j=_6d+1;j<str.length;j++){_6f=this.getCharacterType(str.charAt(j));if(_6f!=this.LATINNUMBER&&_6f!=this.NEUTRAL){break;}}if(_6f==this.LATIN&&this.LogicalRTL==1){_71=this.LATIN;}else{_71=_70;}break;case this.NUMERICSEPARATOR:_71=this.NEUTRAL;if(_6e==this.LATINNUMBER){if(_6d<str.length-1){_6f=this.getCharacterType(str.charAt(_6d+1));}switch(_6f){case this.LATINNUMBER:_71=_6f;break;case this.LOCAL:case this.NEUTRAL:_71=_70;break;}}break;case this.BIDISPECIAL:case this.SPACE:_71=this.NEUTRAL;break;case this.CARRIAGERETURN:case this.LINEFEED:_71=this.ENDOFLINE;break;default:_71=_70;}return (_71);};function doAction(_72,_73){var _74=_72&this.MASK_ACTION;var _75;switch(_74){case this.NL:case this.NR:_75=(_74&this.MASK_ACTION&~this.ACTION)>>8;while(_73-->0){if((this.stringAsClasses[_73]&this.MASK_STATE)==this.NEUTRAL){if((this.stringAsClasses[_73]&this.MASK_ACTION)&&(this.stringAsClasses[_73+1]==this.LOCALNUMBER||this.stringAsClasses[_73+1]==this.LATINNUMBER)){this.stringAsClasses[_73]=this.stringAsClasses[_73+1];}else{this.stringAsClasses[_73]=_75;}}else{break;}}break;}};function applyClass(str){var _76=new Array(str.length);var Str=new String("");var i;for(i=0;i<str.length;i++){_76[i]=str.charAt(i);}if(this.LogicalRTL==1){this.invertSegment(_76,this.IsLatinInvert);this.invertSegment(_76,this.IsLocalNumInvert);}else{this.invertSegment(_76,this.LocalNumInvert);this.invertSegment(_76,this.LocalInvert);}if(this.LogicalRTL==1){this.invertSegment(_76,this.IsAllLineInvert);}for(i=0;i<_76.length;i++){Str+=_76[i];}return (Str);};function needInvert(_77,_78){switch(_77){case this.LocalInvert:return (this.stringAsClasses[_78]==this.LOCAL||this.stringAsClasses[_78]==this.LOCALNUMBER);case this.LocalNumInvert:return (this.stringAsClasses[_78]==this.LOCALNUMBER);case this.LatinInvert:return ((this.stringAsClasses[_78]==this.LATIN)||(this.stringAsClasses[_78]==this.LATINNUMBER));case this.AllLineInvert:return (this.stringAsClasses[_78]!=this.ENDOFLINE);default:return (false);}};function invertSegment(s,_79){var _7a=0;var end;var sum;var tmp;var i;while(_7a<s.length){if(this.needInvert(_79,_7a)){end=_7a+1;while(end<s.length){if(!this.needInvert(_79,end)){break;}end++;}sum=end-1+_7a;for(;_7a<sum-_7a;_7a++){tmp=doSymSwap(s[_7a]);s[_7a]=doSymSwap(s[sum-_7a]);s[sum-_7a]=tmp;}_7a=end-1;}_7a++;}};function Table(_7b,_7c){var i=0;this.trows=_7b;this.tcols=_7c;this.rows=new Array(_7b);for(i=0;i<_7b;i++){this.rows[i]=new Array(_7c);}this.initTable=initTable;this.getArray=getArray;};function getArray(){return this.rows;};function initTable(){var i=0;var j=0;var k=0;var l=0;var m=Math.min(this.trows*this.tcols,initTable.arguments.length);for(k=0;k<m;k++,l++){if(l==this.tcols){i++;j=0;l=0;}this.rows[i][j++]=this.initTable.arguments[k];}};var INIT=2147483648;var LEVEL=1879048192;var TEXTTYPE=16777216;var TEXT_ORIENTATION=196608;var NUMERALS=12288;var SYM_SWAP=256;var WORD_BREAK=512;var TEXT_SHAPE=255;var ROUND_TRIP=1048576;var TEXT_VISUAL=0;var TEXT_IMPLICIT=16777216;var ORIENTATION_LTR=0;var ORIENTATION_RTL=65536;var ORIENTATION_CONTEXT_LTR=131072;var ORIENTATION_CONTEXT_RTL=196608;var NUMERALS_NOMINAL=0;var NUMERALS_NATIONAL=8192;var NUMERALS_CONTEXTUAL=12288;var BREAK=512;var NO_BREAK=0;var SWAPPING=256;var NO_SWAPPING=0;var TEXT_SHAPED=0;var TEXT_NOMINAL=16;var TEXT_INITIAL=17;var TEXT_MIDDLE=18;var TEXT_FINAL=19;var TEXT_ISOLATED=20;var TAIL=8203;var ROUND_TRIP_ON=0;var ROUND_TRIP_OFF=1048576;var formatedAttributes=0;function setAttribute(_7d,_7e){formatedAttributes=((formatedAttributes&(~(_7d)))|(_7e&(_7d)));};function getAttribute(_7f,_80){return ((_7f)&(_80));};var LINKR=1;var LINKL=2;var IRRELEVANT=4;var LAMTYPE=16;var ALEFTYPE=32;var LINKFIELD=3;var lamAlphCount=0;var shapeTable=[[[0,0,0,0],[0,0,0,0],[0,1,0,3],[0,1,0,1]],[[0,0,2,2],[0,0,1,2],[0,1,1,2],[0,1,1,3]],[[0,0,0,0],[0,0,0,0],[0,1,0,3],[0,1,0,3]],[[0,0,1,2],[0,0,1,2],[0,1,1,2],[0,1,1,3]]];var convertFEto06=[1611,1611,1612,1612,1613,1613,1614,1614,1615,1615,1616,1616,1617,1617,1618,1618,1569,1570,1570,1571,1571,1572,1572,1573,1573,1574,1574,1574,1574,1575,1575,1576,1576,1576,1576,1577,1577,1578,1578,1578,1578,1579,1579,1579,1579,1580,1580,1580,1580,1581,1581,1581,1581,1582,1582,1582,1582,1583,1583,1584,1584,1585,1585,1586,1586,1587,1587,1587,1587,1588,1588,1588,1588,1589,1589,1589,1589,1590,1590,1590,1590,1591,1591,1591,1591,1592,1592,1592,1592,1593,1593,1593,1593,1594,1594,1594,1594,1601,1601,1601,1601,1602,1602,1602,1602,1603,1603,1603,1603,1604,1604,1604,1604,1605,1605,1605,1605,1606,1606,1606,1606,1607,1607,1607,1607,1608,1608,1609,1609,1610,1610,1610,1610,1628,1628,1629,1629,1630,1630,1631,1631];var Link06=[1+32+256*17,1+32+256*19,1+256*21,1+32+256*23,1+2+256*25,1+32+256*29,1+2+256*31,1+256*35,1+2+256*37,1+2+256*41,1+2+256*45,1+2+256*49,1+2+256*53,1+256*57,1+256*59,1+256*61,1+256*63,1+2+256*65,1+2+256*69,1+2+256*73,1+2+256*77,1+2+256*81,1+2+256*85,1+2+256*89,1+2+256*93,0,0,0,0,0,1+2,1+2+256*97,1+2+256*101,1+2+256*105,1+2+16+256*109,1+2+256*113,1+2+256*117,1+2+256*121,1+256*125,1+256*127,1+2+256*129,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,1+256*133,1+256*135,1+256*137,1+256*139,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,1+32,1+32,0,1+32,1,1,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1,1+2,1,1,1,1,1,1,1,1,1,1,1+2,1,1+2,1+2,1+2,1+2,1,1];var LinkFE=[1+2,1+2,1+2,0,1+2,0,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,1+2,0,0+32,1+32,0+32,1+32,0,1,0+32,1+32,0,2,1+2,1,0+32,1+32,0,2,1+2,1,0,1,0,2,1+2,1,0,2,1+2,1,0,2,1+2,1,0,2,1+2,1,0,2,1+2,1,0,1,0,1,0,1,0,1,0,2,1+2,1,0,2,1+2,1,0,2,1+2,1,0,2,1+2,1,0,2,1+2,1,0,2,1+2,1,0,2,1+2,1,0,2,1+2,1,0,2,1+2,1,0,2,1+2,1,0,2,1+2,1,0+16,2+16,1+2+16,1+16,0,2,1+2,1,0,2,1+2,1,0,2,1+2,1,0,1,0,1,0,2,1+2,1,0,1,0,1,0,1,0,1];var IrreleventPos=[0,2,4,6,8,10,12,14,];var AlefTable=[1570,1571,1573,1575];var LamAlefTable=[65269,65271,65273,65275];var AlefTableFE=[65153,65154,65155,65156,65159,65160,65165,65166];var LamTableFE=[65245,65246,65247,65248];var LamAlefTableFE=[65269,65271,65273,65275,65270,65272,65274,65276];function uba_getLink(x){if(x>=1570&&x<=1747){return (Link06[x-1570]);}else{if(x==8205){return (3);}else{if(x>=8301&&x<=8303){return (4);}else{if(x>=65136&&x<=65276){return (LinkFE[x-65136]);}else{return (0);}}}}};function LamAlef(_81){for(var i=0;i<AlefTable.length;i++){if(AlefTable[i]==_81){return LamAlefTable[i];}}return 0;};function isAlef(c){for(var i=0;i<AlefTable.length;i++){if(AlefTable[i]==c){return true;}}return false;};function isAlefFE(c){for(var i=0;i<AlefTableFE.length;i++){if(AlefTableFE[i]==c){return true;}}return false;};function isLamFE(c){for(var i=0;i<LamTableFE.length;i++){if(LamTableFE[i]==c){return true;}}return false;};function isLamAlefFE(c){for(var i=0;i<LamAlefTableFE.length;i++){if(LamAlefTableFE[i]==c){return true;}}return false;};function LamAlefFE(_82){for(var i=0;i<AlefTableFE.length;i++){if(AlefTableFE[i]==_82){return LamAlefTableFE[i/2];}}return 0;};function specialChar(ch){if((ch>=1569&&ch<1574)||(ch==1575)||(ch>1582&&ch<1587)||(ch>1607&&ch<1610)||(ch==1577)||(ch>=1628&&ch<=1631)){return (1);}else{return (0);}};function YeehHamzaChar(ch){if((ch==65161)||(ch==65162)){return (true);}else{return (false);}};function Lamalef(x){if(x==1570){return (1628);}else{if(x==1571){return (1629);}else{if(x==1573){return (1630);}else{if(x==1575){return (1631);}else{return (0);}}}}};function SeenChar(ch){if((ch==65201)||(ch==65202)||(ch==65205)||(ch==65206)||(ch==65209)||(ch==65210)||(ch==65213)||(ch==65214)){return (true);}else{return (false);}};function CompressLamAlef(_83,_84,_85){var _86=new Array(_84);var i=0;var j=0;var Lam=1604;for(i=0;i<_84-1;i++){if((_85&&isAlef(_83[i])&&_83[i+1]==Lam)||(!_85&&isAlef(_83[i+1])&&_83[i]==Lam)){_86[j++]=LamAlef((_85)?_83[i]:_83[i+1]);i++;}else{_86[j++]=_83[i];}}if(i<_84){_86[j++]=_83[i];}return _86;};function invertStr(str){var _87=new Array(str.length);var Str=new String("");var i;for(i=0;i<str.length;i++){_87[i]=str.charAt(str.length-i-1);}for(i=0;i<_87.length;i++){Str+=_87[i];}return (Str);};function shape(_88,_89){shape(_88,_89,true);};function shape(_8a,_8b,_8c){var _8d;var _8e=0;var _8f=0;var _90=0;var _91;var Nx;var _92;var _93,Nw,_94,_95,i,Ix;var _96;var _97;var j,x;var _98;var _99=0;var RTL=true;var _9a=false;var _9b;if(_8b.length==0){return;}var _9c=new Array(_8b.length);_9c=_8b;if(_8a){RTL=true;}else{RTL=false;}_9a=true;for(var idx=0;idx<_9c.length;idx++){var _9d=_9c[idx];if((_9d>=65136)&&(_9d<=65276)){_9c[_99]=convertFEto06[(_9d-65136)];}else{_9c[_99]=_9d;}_99++;}if(RTL&&_9a){Ix=0;_93=_9c.length;_94=+1;}else{Ix=_9c.length-1;_93=-1;_94=-1;}_9b=_9c.length;_90=0;_8e=0;_8d=uba_getLink(_9c[Ix]);_92=Ix;_91=Ix;Nx=-2;while(Ix!=_93){if((_8d&65280)>0){Nw=Ix+_94;while(Nx<0){if(Nw==_93){_8f=0;Nx=30000;}else{_8f=uba_getLink(_9c[Nw]);if((_8f&IRRELEVANT)==0){Nx=Nw;}else{Nw+=_94;}}}if(((_8d&ALEFTYPE)>0)&&((_8e&LAMTYPE)>0)){_96=Lamalef(_9c[Ix]);if(_96!=0){if(RTL&&_9a){_9c[_91]=_96;_9c[Ix]=32;Ix=_91;}else{_9c[Ix]=32;_9c[_91]=_96;Ix=_91;}}_8e=_90;_8d=uba_getLink(_96);}_98=specialChar(_9c[Ix]);if(getAttribute(formatedAttributes,TEXT_SHAPE)==TEXT_INITIAL){if(_98==0){_95=2;}else{_95=0;}}else{if(getAttribute(formatedAttributes,TEXT_SHAPE)==TEXT_MIDDLE){if(_98==0){_95=3;}else{_95=1;}}else{if(getAttribute(formatedAttributes,TEXT_SHAPE)==TEXT_FINAL){if(_98==0){_95=1;}else{_95=1;}}else{if(getAttribute(formatedAttributes,TEXT_SHAPE)==TEXT_ISOLATED){_95=0;}else{_95=shapeTable[_8f&(LINKR+LINKL)][_8e&(LINKR+LINKL)][_8d&(LINKR+LINKL)];}}}}_9c[Ix]=(65136+(_8d>>8)+_95);}if((_8d&IRRELEVANT)==0){_90=_8e;_8e=_8d;_92=_91;_91=Ix;}if((_8d&IRRELEVANT)>0){var _9e=_9c[Ix]-1611;var _9f=0;var _a0=(_8f&(LINKR+LINKL));var _a1=_8e&(LINKR+LINKL);if(((_a1==3)&&(_a0==1))||((_a1==3)&&(_a0==3))){_9f=1;}if(((_8f&ALEFTYPE)>0)&&((_8e&LAMTYPE)>0)){_9f=0;}if((_9c[Ix]==1612)||(_9c[Ix]==1613)){_9f=0;}_9c[Ix]=(65136+IrreleventPos[_9e]+_9f);}Ix+=_94;if(Ix==Nx){_8d=_8f;Nx=-2;}else{if(Ix!=_93){_8d=uba_getLink(_9c[Ix]);}}}if(_8c){for(var idx=0;idx<_9c.length;idx++){if(RTL&&_9a){if((SeenChar(_9c[idx]))&&((idx+1<_9c.length)&&(_9c[idx+1]==32))){_9c[idx+1]=TAIL;}if((!SeenChar(_9c[idx]))&&((idx+1<_9c.length)&&(_9c[idx+1]==TAIL))){_9c[idx+1]=32;}if(YeehHamzaChar(_9c[idx])){if((idx+1<_9c.length)&&(_9c[idx+1]==32)){if(_9c[idx]==65161){_9c[idx]=65263;}else{_9c[idx]=65264;}_9c[idx+1]=65152;}else{if(_9c[idx]==65161){_9c[idx]=65163;}else{_9c[idx]=65164;}}}}else{if((SeenChar(_9c[idx]))&&((idx-1>=0)&&(_9c[idx-1]==32))){_9c[idx-1]=TAIL;}if((!SeenChar(_9c[idx]))&&((idx-1>=0)&&(_9c[idx-1]==TAIL))){_9c[idx-1]=32;}if(YeehHamzaChar(_9c[idx])){if((idx-1>=0)&&(_9c[idx-1]==32)){if(_9c[idx]==65161){_9c[idx]=65263;}else{_9c[idx]=65264;}_9c[idx-1]=65152;}else{if(_9c[idx]==65161){_9c[idx]=65163;}else{_9c[idx]=65164;}}}}}}return _9c;};function ara_type(_a2,_a3,_a4){var _a5=0;var _a6=0;var _a7=0;var _a8=0;var len=_a3.length;var _a9=new Array(len);for(var _aa=0;_aa<len;_aa++){_a9[_aa]=_a3.charCodeAt(_aa);}if(len>_a2+4){_a6=_a2+4;_a8=_a2+2;}else{if(len>_a2+3){_a6=_a2+3;_a8=_a2+2;}else{if(len>_a2+2){_a6=_a2+2;_a8=_a2+2;}else{if(len>_a2+1){_a6=_a2+1;_a8=_a2+1;}else{if(len>_a2){_a6=_a2;_a8=_a2;}}}}}if(_a2-4>=0){_a5=_a2-4;_a7=_a2-2;}else{if(_a2-3>=0){_a5=_a2-3;_a7=_a2-2;}else{if(_a2-2>=0){_a5=_a2-2;_a7=_a2-2;}else{if(_a2-1>=0){_a5=_a2-1;_a7=_a2-1;}else{if(_a2>=0){_a5=_a2;_a7=_a2;}}}}}_a9=shape(_a4,_a9);var _ab=new Array(len);for(var _aa=0;_aa<len;_aa++){_ab[_aa]=_a3.charCodeAt(_aa);}var _ac=_a6-_a5+1;if(_a6-_a5>0){for(var _ad=_a5;_ad<=_a6;_ad++){_ab[_ad]=_a9[_ad];}}var _ae="";for(var _af=0;_af<_ab.length;_af++){_ae+=String.fromCharCode(_ab[_af]);}return _ae;};