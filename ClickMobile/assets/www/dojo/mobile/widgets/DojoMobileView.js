egl.defineWidget("dojo.mobile.widgets","DojoMobileView","dojo.mobile.widgets","DojoMobileContainer","div",{"constructor":function(){var _1=this;_1.backText="";_1.headerTitle="";_1.id="";_1.refs=[];_1._containerWidth="100%";_1._scrollBar=true;_1._class="";_1.selected=false;_1.toolBar=null;_1.children=[];require(["dojo/mobile/utility/Synchronor","dojox/mobile/ScrollableView","dojox/mobile/SwapView"],function(_2){_1.synchronor=_2;_1.renderWhenDojoIsDoneLoading();});},"_checkPropsAllSet":function(){},"createDojoWidget":function(_3){var _4=this;var _5="";var _6=[];if(this.id){_3.id=this.id;}var _7=function(_8){if(_5.length>0){var _9=_6.length==1?_3:document.createElement("div");_4.dojoWidget=new dojox.mobile.ScrollableView({selected:_4.selected||false,scrollDir:_5},_9);_4.containerWidget=_4.dojoWidget;if(_4.containerWidget.domNode.childNodes[0]){_4.containerWidget.domNode.childNodes[0].style.width=_4._containerWidth;}}if(_4.isSwappable){var _a=new dojox.mobile.SwapView({selected:_4.selected||false},_3);if(_4.dojoWidget){_a.addChild(_4.dojoWidget);}else{_4.containerWidget=_a;}_4.dojoWidget=_a;_8.trigger(_4,"SYN_READY");}else{if(!_4.dojoWidget){_4.dojoWidget=new dojox.mobile.View({selected:_4.selected||false},_3);_4.containerWidget=_4.dojoWidget;_8.trigger(_4,"SYN_READY");}else{_8.trigger(_4,"SYN_READY");}}if(_4.id){_4.dojoWidget.set("id",_4.id);}_4._addHeading();if(_4.refs){for(var n=0;n<_4.refs.length;n++){_4.refs[n]._setMoveto(_4.getID());}_4.refs.length=0;}_4.dojoWidget.onBeforeTransitionOut=function(_b,_c,_d,_e,_f){var _10=dojo.byId(_b);if(_10){_10.style.top="0px";}};_4.synchronor.wait(_4.children,"SYN_READY",function(){_4.setChildren(_4.children,_4.containerWidget);if(_4.children){for(var n=0;n<_4.children.length;n++){if(_4.children[n].children&&_4.children[n].children.length>0&&_4.children[n].children[0].view){var _11=_4.children[n];for(var i=0;i<_11.children.length;i++){_4.dojoWidget.domNode.appendChild(_11.children[i].view.eze$$DOMElement);if(_11.children[i].view.dojoWidget){_11.children[i].view.dojoWidget.startup();}}var sel=_11.selection;setTimeout(function(){_11.setSelection(sel);},1);}}}if(_4.dojoWidget.domNode&&_4.dojoWidget.domNode.parentNode){_4.dojoWidget.startup();}else{if(_4.containerWidget.domNode&&_4.containerWidget.domNode.parentNode){_4.containerWidget.startup();}}if(_4._class){require(["dojo/_base/sniff"],function(has){setTimeout(function(){_4.containerWidget.domNode.className=_4.containerWidget.domNode.className+" "+_4._class;},has("ie")?100:0);});}});};if(_4.scrollHorizontally){_5=_5+"h";}if(_4.scrollVertically){_5=_5+"v";}if(_4.isSwappable){_6.push("dojox/mobile/SwapView");}if(_5.indexOf("h")!=-1||_5.indexOf("v")!=-1){_6.push("dojox/mobile/ScrollableView");}_7(_4.synchronor);},"_addHeading":function(){var _12=this;var _13=_12._getContainerWidget();if(_12.backText||_12.backView||_12.moveTo||_12.headerTitle||(_12.toolBar&&_12.toolBar.length)){var _14={};if(_12.headerTitle){_14.label=_12.headerTitle;}if(_12.backText){_14.back=_12.backText;}if(_12.moveTo){_14.moveTo=_12.moveTo;}else{if(_12.backView&&_12.backView.getID()){_14.moveTo=_12.backView.getID();}}if(_14.moveTo&&!_14.back){_14.back=" ";}if(_14.moveTo==_12.getID()){delete _14.moveTo;}_12.heading=new dojox.mobile.Heading(_14);_13.addChild(_12.heading);if(_12.toolBar&&_12.toolBar.length&&_12.synchronor){_12.synchronor.wait(_12.toolBar,"SYN_READY",function(){for(var i=0;i<_12.toolBar.length;++i){if(_12.toolBar[i].dojoWidget){_12.heading.addChild(_12.toolBar[i].dojoWidget);}}});}}},"_show":function(){if(this.eze$$parent){return;}else{this.setLogicalParent(egl.Document);this.setParent(egl.Document);}},"setHeaderTitle":function(_15){this.headerTitle=_15;if(this.dojoWidget&&this.headerTitle){if(this.heading){this.heading.set({"label":this.headerTitle});}else{this._addHeading();}}},"getHeaderTitle":function(){return this.headerTitle;},"setBackText":function(_16){this.backText=_16;if(this.dojoWidget&&this.backText){if(this.heading){this.heading.set("back",this.backText);var _17=this.heading.domNode.getElementsByTagName("div");if(_17.length>=3){_17[1].innerHTML=this.backText;this.heading.set({"label":this.headerTitle});}else{}}}},"getBackText":function(){return this.backText;},"setBackView":function(_18){this.backView=_18;if(this.backView){this.backView._show();this.moveTo=this.backView.getID();if(!this.moveTo&&this!=this.backView){this.backView._addRef(this);}}if(this.dojoWidget&&this.backView&&this.backView.getID()){this._setMoveto(this.moveTo);}},"_setMoveto":function(_19){if(this.heading){this.heading.set("moveTo",_19);}else{this.moveTo=_19;}},"_addRef":function(_1a){this.refs.push(_1a);},"getBackView":function(){return this.backView;},"setSelected":function(s){var _1b=this;_1b.selected=s;function _1c(){if(_1b.dojoWidget){if(s){if(_1b.dojoWidget.domNode.parentNode){_1b.dojoWidget.show();}else{_1b.dojoWidget.domNode.style.display="";}if(_1b.dojoWidget.domNode.style.visibility!="visible"){_1b.dojoWidget.domNode.style.visibility="visible";}if(document.createEvent){event=document.createEvent("HTMLEvents");event.initEvent("resize",false,true);window.dispatchEvent(event);}else{window.fireEvent&&window.fireEvent("resize");}}else{_1b.dojoWidget.domNode.style.display="none";}}};require(["dojo/mobile/utility/Synchronor"],function(_1d){_1d.wait([_1b],"SYN_READY",function(){_1c();});});},"getSelected":function(){return this.selected;},"showView":function(){this.selected=true;if(this.dojoWidget){this.showView();}},"setID":function(id){this.id=null;if(id&&id!="undefined"){this.id=id;if(this.dojoWidget){this.dojoWidget.set("id",this.id);}}},"getID":function(){if(this.id){return this.id;}if(this.dojoWidget){return this.dojoWidget.id;}},"removeChildren":function(_1e){var _1f=this._getContainerWidget(_1e);this._removeChildren(1,_1f);},"_appendChild":function(_20,_21){var _22=this._getContainerWidget(_21);var _23=null;if(!_22){throw egl.createRuntimeException("Can't append child to this dojoWidget. The dojoWidget has not been created.",[_23.tagName]);}_23=_22.domNode;if(!_20){throw egl.createRuntimeException("Can't append a null child.",[_23.tagName]);}if(_20==this){throw egl.createRuntimeException("Can't append the widget itself as a child.",[_23.tagName]);}var _24=_20.eze$$DOMElement;if(!_24){throw egl.createRuntimeException("The child node does not exist.",[_23.tagName]);}try{_20.eze$$parent=this;}catch(e){throw egl.createRuntimeException("Append child error.",[_20.getTagName(),egl.inferSignature(this),this]);}var _25=false;for(var i=0;i<_23.childNodes.length;++i){if(_23.childNodes[i].className&&_23.childNodes[i].className.indexOf("mblScrollableViewContainer")!=-1){_23.childNodes[i].appendChild(_24);_25=true;break;}}if(_25==false){_23.appendChild(_24);}this.childrenChanged();},"setScrollVertically":function(_26){this.scrollVertically=_26;},"getScrollVertically":function(){return this.scrollVertically||false;},"setScrollHorizontally":function(_27){this.scrollHorizontally=_27;},"getScrollHorizontally":function(){return this.scrollHorizontally||false;},"setIsSwappable":function(_28){this.isSwappable=_28;},"getIsSwappable":function(){return this.isSwappable||false;},"getClassName":function(){return this._class;},"setClassName":function(_29){this._class=_29;},"getToolBar":function(){return this.toolBar;},"setToolBar":function(v){this.toolBar=v;}});