egl.defineWidget("dojo.mobile.widgets","DojoMobileTabContainer","dojo.mobile.widgets","DojoMobileContainer","div",{"constructor":function(){var _1=this;this.selection=1;this.acceptChildrenTypes={"dojo.mobile.widgets.DojoMobileTab":true};this.started=false;this.segmentedControl=true;require(["dojox/mobile/TabBar"],function(){_1.renderWhenDojoIsDoneLoading();});},"addEventHandlers":function(){var _2=this;},"getChildrenLength":function(){if(this.tabBarWidget){var _3=this.tabBarWidget.getChildren();return _3?_3.length:0;}return 0;},"setChildren":function(_4){var _5=this;this.children=_4;this.checkChildrenType();if(this.tabBarWidget&&this.children){var i=0,j=0,_6=true,_7=[],_8=[];var _9=this.tabBarWidget.getChildren();this.selection=this.getSelection();if(_9){for(i=0;i<_9.length;++i){_6=true;for(j=0;j<_4.length;++j){if(_9[i]==_4[j].tabBtnWidget){_6=false;break;}}if(_6){_7.push(i);}}var _a=this.selection-1;function _b(_c){preSel=_7[_c]-1;preIndex=_c-1;if(preIndex<0){return 0;}if(_7[preIndex]!=preSel){return preSel;}else{return _b(preIndex);}};if(_7.length>0){_7.sort();for(i=0;i<_7.length;++i){if(_7[i]==_a){newSel=_b(i);this.selection=++newSel;break;}}for(i=0;i<_7.length;++i){var _d=_9[_7[i]].get("moveTo");var _e=dijit.byId(_d);if(_e){_e.destroy(false);}this.tabBarWidget.removeChild(_7[i]);_9[_7[i]].destroy(false);if(this.selection>1&&_7[i]<=this.selection){--this.selection;}}}}for(i=0;i<this.children.length;++i){if(_4[i].tabBtnWidget&&_4[i].tabViewWidget){if(this.tabBarWidget.getIndexOfChild(_4[i].tabBtnWidget)==-1){this.tabBarWidget.addChild(_4[i].tabBtnWidget,i+1);this.tabContainerNode.appendChild(_4[i].tabViewWidget.domNode);_8.push(i);if(i<this.selection){++this.selection;}}}else{_4[i].parent=this;}}this.setSelection(this.selection);if(_8.length>0){for(i=0;i<_8.length;++i){_4[_8[i]].tabViewWidget.startup();}}if(this._tabPosition=="Bottom"){this.fixBottom();}}},"addTab":function(_f,_10){if(_10<1||_10>this.children.length+1){egl.createRuntimeException(this.eze$$typename+".addTab : Invalid tab index "+tabIndex);}this.children.splice(_10,0,_f);this.setChildren(this.children);if(document.createEvent){event=document.createEvent("HTMLEvents");event.initEvent("resize",false,true);window.dispatchEvent(event);}else{window.fireEvent&&window.fireEvent("resize");}return;},"removeTab":function(_11){if(_11<1||_11>this.children.length){egl.createRuntimeException(this.eze$$typename+".addTab : Invalid tab index "+tabIndex);}this.children.splice(_11-1,1);this.setChildren(this.children);if(document.createEvent){event=document.createEvent("HTMLEvents");event.initEvent("resize",false,true);window.dispatchEvent(event);}else{window.fireEvent&&window.fireEvent("resize");}return;},"appendChild":function(_12){this.children=this.children||[];this.children.push(_12);this.setChildren(this.children);},"appendChildren":function(_13){this.children=this.children||[];for(var n=0;n<_13.length;n++){this.children.push(_13[n]);}this.setChildren(this.children);},"removeChild":function(_14){if(!this.children){return;}for(var n=0;n<this.children.length;n++){if(this.children[n]==_14){this.removeTab(n+1);return;}}throw this.eze$$typename+".removeChild: the child is not found.";},"removeChildren":function(){this.children=[];if(this.dojoWidget){while(this.dojoWidget.domNode.firstChild){this.dojoWidget.domNode.removeChild(this.dojoWidget.domNode.firstChild);}}},"createDojoWidget":function(_15){var _16=this;if(this._class){_15.className=_15.className+" "+this._class;}var _17=document.createElement("ul");if(!_17){egl.createRuntimeException("ERROR IN CREATING TABBAR");}_16.tabContainerNode=_15;_16.containerNode=_15;if(_16._tabPosition=="Fixed Bottom"){_17.style.position="fixed";_17.style.left=0;_17.style.bottom=0;_17.style.right=0;_17.style.zIndex="10000";_16.tabContainerNode.appendChild(_17);}else{if(_16._tabPosition=="Fixed Top"){_17.style.position="fixed";_17.style.left=0;_17.style.top=0;_17.style.right=0;_17.style.zIndex="10000";_16.tabContainerNode.appendChild(_17);}else{if(_16._tabPosition!="Bottom"){_16.tabContainerNode.appendChild(_17);}}}_17.id=_16.id||"";var _18={};if(_16.segmentedControl){_18.barType="segmentedControl";}_16.tabBarWidget=new dojox.mobile.TabBar(_18,_17);_16.dojoWidget=_16.tabBarWidget;require(["dojo/mobile/utility/Synchronor"],function(_19){_19.trigger(_16,"SYN_READY");_19.wait(_16.children,"SYN_READY",function(){for(var i=0;i<_16.children.length;++i){if(_16.children[i].tabBtnWidget&&_16.children[i].tabViewWidget){_16.tabBarWidget.addChild(_16.children[i].tabBtnWidget);_16.tabContainerNode.appendChild(_16.children[i].tabViewWidget.domNode);}else{_16.children[i].parent=_16;}}if(_16._tabPosition=="Bottom"){_16.tabContainerNode.appendChild(_17);}_16.setSelection(_16.selection);_16.tabBarWidget.startup();for(var i=0;i<_16.children.length;++i){if(_16.children[i].tabViewWidget){_16.children[i].tabViewWidget.startup();}}if(_16.segmentedControl==false){require(["dojo/_base/sniff"],function(has){setTimeout(function(){_16.tabBarWidget.domNode.style.height="auto";},has("ie")?100:0);});}_16.started=true;_16.addEventHandlers();});});var _1a=_16.copyAttribute;_16.copyAttribute=function(){_1a.apply(_16,arguments);_16.eze$$DOMElement=_16.containerNode;};},"fixBottom":function(){var _1b=this;for(var i=0;i<_1b.tabContainerNode.childNodes.length;++i){if(_1b.tabContainerNode.childNodes[i]==_1b.tabBarWidget.domNode&&i!=(_1b.tabContainerNode.childNodes.length-1)){_1b.tabContainerNode.removeChild(_1b.tabBarWidget.domNode);_1b.tabContainerNode.appendChild(_1b.tabBarWidget.domNode);break;}}},"getSelection":function(){var _1c=this.tabBarWidget.getChildren();for(var i=0;i<_1c.length;++i){if(dojo.hasClass(_1c[i].domNode,"mblTabButtonSelected")){return i+1;}}return 0;},"setSelection":function(_1d){if(_1d<0){_1d=1;}if(this.tabBarWidget&&this.children&&_1d>this.children.length){_1d=this.children.length;}this.selection=_1d;_1d=_1d-1;if(this.tabBarWidget&&this.children&&this.children.length>0){if(this.started==false){for(var i=0;i<this.children.length;i++){this.children[i].tabViewWidget.domNode.style.visibility="visible";if(i==_1d){this.children[i].tabBtnWidget.select();this.children[i].tabViewWidget._visible=true;this.children[i].tabViewWidget.domNode.style.display="";this.selection=_1d+1;continue;}this.children[i].tabBtnWidget.deselect();this.children[i].tabViewWidget.domNode.style.display="none";this.children[i].tabViewWidget._visible=false;}if(this.children.length<=_1d){this.children[this.children.length].tabBtnWidget.select();this.children[this.children.length].tabViewWidget.domNode.style.display="";this.children[this.children.length].tabViewWidget._visible=true;this.selection=this.children.length;}else{if(_1d<0){this.children[0].tabBtnWidget.select();this.children[0].tabViewWidget.domNode.style.display="";this.children[0].tabViewWidget._visible=true;this.selection=1;}}}else{for(var i=0;i<this.children.length;i++){this.children[i].tabViewWidget._visible=false;this.children[i].tabViewWidget.domNode.style.visibility="visible";this.children[i].tabViewWidget.domNode.style.display="none";}if(this.children.length<=_1d){this.children[this.children.length].tabViewWidget._visible=true;this.children[this.children.length].tabViewWidget.domNode.style.display="";this.children[this.children.length].tabBtnWidget.defaultClickAction();this.selection=this.children.length;}else{if(_1d<0){this.children[0].tabViewWidget._visible=true;this.children[0].tabBtnWidget.defaultClickAction();this.children[0].tabViewWidget.domNode.style.display="";this.selection=1;}else{this.children[_1d].tabViewWidget._visible=true;this.children[_1d].tabBtnWidget.defaultClickAction();this.children[_1d].tabViewWidget.domNode.style.display="";this.selection=_1d+1;}}}}},"setID":function(id){if(id&&id!="undefined"){this.id=id;}else{this.id="";}},"setSegmentedControl":function(_1e){this.segmentedControl=_1e;},"getSegmentedControl":function(){return this.segmentedControl||false;},"getClassName":function(){return this._class;},"setClassName":function(_1f){this._class=_1f;},"getFixedBottom":function(){return this._fixedBottom;},"setFixedBottom":function(_20){this._fixedBottom=_20;},"getTabPosition":function(){return this._tabPosition;},"setTabPosition":function(_21){this._tabPosition=_21;},"getOnTabSelected":function(){return this.onTabSelected||(this.onTabSelected=[]);},"setOnTabSelected":function(){throw egl.eglx.ui.rui.Widget.ErrorMessageForEventHandlers;}});